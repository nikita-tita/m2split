# Supabase Setup Guide

## 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ Supabase

1. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ https://supabase.com
2. –ù–∞–∂–º–∏ "Start your project"
3. –í–æ–π–¥–∏ —á–µ—Ä–µ–∑ GitHub
4. –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç (Organization ‚Üí New project)
   - **Name**: m2split
   - **Database Password**: (–ø—Ä–∏–¥—É–º–∞–π –∏ —Å–æ—Ö—Ä–∞–Ω–∏!)
   - **Region**: –≤—ã–±–µ—Ä–∏ –±–ª–∏–∂–∞–π—à–∏–π (Europe West –¥–ª—è –†–§)
   - **Pricing**: Free tier
5. –î–æ–∂–¥–∏—Å—å —Å–æ–∑–¥–∞–Ω–∏—è (1-2 –º–∏–Ω—É—Ç—ã)

## 2. –ó–∞–ø—É—Å–∫ SQL –º–∏–≥—Ä–∞—Ü–∏–∏

1. –í Supabase Dashboard –æ—Ç–∫—Ä–æ–π **SQL Editor** (–±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é)
2. –ù–∞–∂–º–∏ "+ New query"
3. –°–∫–æ–ø–∏—Ä—É–π –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ —Ñ–∞–π–ª–∞ `supabase/migrations/001_initial_schema.sql`
4. –í—Å—Ç–∞–≤—å –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏ –Ω–∞–∂–º–∏ **Run** (–∏–ª–∏ Ctrl+Enter)
5. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ (–∑–µ–ª–µ–Ω–∞—è –≥–∞–ª–æ—á–∫–∞)

## 3. –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

1. –í Supabase Dashboard –æ—Ç–∫—Ä–æ–π **Project Settings** ‚Üí **API**
2. –°–∫–æ–ø–∏—Ä—É–π –¥–≤–∞ –∑–Ω–∞—á–µ–Ω–∏—è:
   - **Project URL** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abcdefgh.supabase.co`)
   - **anon public** key (–¥–ª–∏–Ω–Ω—ã–π JWT —Ç–æ–∫–µ–Ω)

## 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. –°–∫–æ–ø–∏—Ä—É–π `.env.local.example` –≤ `.env.local`:
   ```bash
   cp .env.local.example .env.local
   ```

2. –û—Ç–∫—Ä–æ–π `.env.local` –∏ –≤—Å—Ç–∞–≤—å —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è:
   ```env
   NEXT_PUBLIC_SUPABASE_URL=https://–≤–∞—à-–ø—Ä–æ–µ–∫—Ç.supabase.co
   NEXT_PUBLIC_SUPABASE_ANON_KEY=–≤–∞—à-anon-–∫–ª—é—á
   ```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ dev —Å–µ—Ä–≤–µ—Ä:
   ```bash
   npm run dev
   ```

## 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

1. –û—Ç–∫—Ä–æ–π http://localhost:3000/dashboard
2. –ü–æ–ø—Ä–æ–±—É–π —Å–æ–∑–¥–∞—Ç—å —Å–¥–µ–ª–∫—É - –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –ë–î
3. –í Supabase Dashboard ‚Üí **Table Editor** –ø—Ä–æ–≤–µ—Ä—å —Ç–∞–±–ª–∏—Ü—É `deals`

## 6. –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö

–í Supabase Dashboard:
- **Table Editor** - –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
- **SQL Editor** - –∑–∞–ø—É—Å–∫ SQL –∑–∞–ø—Ä–æ—Å–æ–≤
- **Database** ‚Üí **Roles** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞–º–∏

## üéØ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å M2 Split —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–µ–∞–ª—å–Ω–æ–π PostgreSQL –ë–î —á–µ—Ä–µ–∑ Supabase.

---

## Troubleshooting

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```
‚ö†Ô∏è Supabase credentials not configured
```
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å `.env.local` –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ `npm run dev`

### –û—à–∏–±–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
```
ERROR: relation "counterparties" already exists
```
**–†–µ—à–µ–Ω–∏–µ**: –¢–∞–±–ª–∏—Ü—ã —É–∂–µ —Å–æ–∑–¥–∞–Ω—ã. –í—Å—ë –û–ö!

### –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è `001_initial_schema.sql` –≤—ã–ø–æ–ª–Ω–∏–ª–∞—Å—å –ø–æ–ª–Ω–æ—Å—Ç—å—é (–≤ –∫–æ–Ω—Ü–µ –µ—Å—Ç—å INSERT —Å sample data)
