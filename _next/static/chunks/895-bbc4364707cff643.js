"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[895],{6383:function(e,t,r){r.d(t,{Layout:function(){return f}});var n=r(7437);r(2265);var a=r(7648),s=r(9376),i=r(1994),c=r(5466),o=r(8736),l=r(9277),d=r(8226),m=r(7117),u=r(5805),g=r(8728),x=r(7692),y=r(2097);let p=[{name:"Дашборд",href:"/dashboard",icon:c.Z},{name:"Сделки",href:"/deals",icon:o.Z},{name:"Реестры",href:"/registries",icon:l.Z},{name:"Выплаты",href:"/payments",icon:d.Z},{name:"Документы",href:"/documents",icon:m.Z},{name:"Контрагенты",href:"/contractors",icon:u.Z},{name:"Настройки",href:"/settings",icon:g.Z}],f=e=>{let{children:t}=e,r=(0,s.usePathname)(),{currentUser:c}=(0,y.o)();return(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsx)("div",{className:"fixed inset-y-0 left-0 w-64 bg-white border-r border-gray-200",children:(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsx)("div",{className:"flex items-center h-16 px-6 border-b border-gray-200",children:(0,n.jsx)("h1",{className:"text-xl font-bold text-primary-600",children:"M2 Split"})}),(0,n.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto",children:p.map(e=>{let t=e.icon,s=r===e.href;return(0,n.jsxs)(a.default,{href:e.href,className:(0,i.W)("flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors",s?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"),children:[(0,n.jsx)(t,{className:"w-5 h-5 mr-3"}),e.name]},e.name)})}),c&&(0,n.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:c.name}),(0,n.jsxs)("p",{className:"text-xs text-gray-500 truncate",children:["DEVELOPER_ADMIN"===c.role&&"Застройщик","M2_OPERATOR"===c.role&&"Оператор М2","CONTRACTOR"===c.role&&"Исполнитель","BANK_INTEGRATION"===c.role&&"Банк"]})]}),(0,n.jsx)("button",{className:"ml-3 p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",title:"Выйти",children:(0,n.jsx)(x.Z,{className:"w-5 h-5"})})]})})]})}),(0,n.jsx)("div",{className:"pl-64",children:(0,n.jsx)("main",{className:"p-8",children:t})})]})}},9379:function(e,t,r){r.d(t,{C:function(){return s}});var n=r(7437);r(2265);var a=r(1994);let s=e=>{let{children:t,variant:r="default",size:s="md"}=e;return(0,n.jsx)("span",{className:(0,a.W)("inline-flex items-center rounded-full font-medium",{default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[r],{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm"}[s]),children:t})}},4226:function(e,t,r){r.d(t,{z:function(){return s}});var n=r(7437);r(2265);var a=r(1994);let s=e=>{let{variant:t="primary",size:r="md",className:s,children:i,disabled:c,...o}=e;return(0,n.jsx)("button",{className:(0,a.W)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[t],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[r],s),disabled:c,...o,children:i})}},9178:function(e,t,r){r.d(t,{O:function(){return i},Z:function(){return s}});var n=r(7437);r(2265);var a=r(1994);let s=e=>{let{children:t,className:r,padding:s="md"}=e;return(0,n.jsx)("div",{className:(0,a.W)("bg-white rounded-lg shadow-sm border border-gray-200",{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[s],r),children:t})},i=e=>{let{title:t,subtitle:r,action:a}=e;return(0,n.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t}),r&&(0,n.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:r})]}),a&&(0,n.jsx)("div",{children:a})]})}},5930:function(e,t,r){r.d(t,{RM:function(){return c},SC:function(){return o},iA:function(){return s},pj:function(){return l},xD:function(){return i}});var n=r(7437);r(2265);var a=r(1994);let s=e=>{let{children:t,className:r}=e;return(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsx)("table",{className:(0,a.W)("min-w-full divide-y divide-gray-200",r),children:t})})},i=e=>{let{children:t}=e;return(0,n.jsx)("thead",{className:"bg-gray-50",children:t})},c=e=>{let{children:t}=e;return(0,n.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t})},o=e=>{let{children:t,onClick:r,className:s}=e;return(0,n.jsx)("tr",{className:(0,a.W)(r&&"cursor-pointer hover:bg-gray-50",s),onClick:r,children:t})},l=e=>{let{children:t,header:r,className:s}=e;return r?(0,n.jsx)("th",{className:(0,a.W)("px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",s),children:t}):(0,n.jsx)("td",{className:(0,a.W)("px-6 py-4 whitespace-nowrap text-sm text-gray-900",s),children:t})}},3375:function(e,t,r){r.d(t,{Ww:function(){return o},ig:function(){return c}});var n=r(1384);let a=e=>["Получатель,ИНН,Счёт,БИК,Сумма,Режим налогообложения,Ставка НДС,Договор №,Дата договора,Комментарий",...e.lines.map(e=>{var t,r;return[(null===(t=e.contractor)||void 0===t?void 0:t.name)||"",e.inn,e.accountNumber,e.bik,e.amount.toFixed(2),e.taxRegime,(null===(r=e.vatRate)||void 0===r?void 0:r.toString())||"",e.contractNumber||"",e.contractDate?(0,n.p6)(e.contractDate):"",e.comment||""]}).map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n"),s=e=>["№ сделки,Объект,Адрес,Лот,Сумма КВН,Статус,Дата создания",...e.map(e=>[e.id,e.objectName,e.objectAddress,e.lotNumber||"",e.totalAmount.toFixed(2),e.status,(0,n.p6)(e.createdAt)]).map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n"),i=(e,t,r)=>{let n=new Blob([e],{type:r}),a=URL.createObjectURL(n),s=document.createElement("a");s.href=a,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)},c=e=>{i(a(e),"registry_".concat(e.registryNumber,"_").concat((0,n.p6)(new Date),".csv"),"text/csv;charset=utf-8;")},o=e=>{i(s(e),"deals_".concat((0,n.p6)(new Date),".csv"),"text/csv;charset=utf-8;")}},2097:function(e,t,r){r.d(t,{o:function(){return n}});let n=(0,r(3011).U)(e=>({currentUser:null,setCurrentUser:t=>e({currentUser:t}),deals:[],setDeals:t=>e({deals:t}),addDeal:t=>e(e=>({deals:[...e.deals,t]})),updateDeal:(t,r)=>e(e=>({deals:e.deals.map(e=>e.id===t?{...e,...r}:e)})),registries:[],setRegistries:t=>e({registries:t}),addRegistry:t=>e(e=>({registries:[...e.registries,t]})),updateRegistry:(t,r)=>e(e=>({registries:e.registries.map(e=>e.id===t?{...e,...r}:e)})),contractors:[],setContractors:t=>e({contractors:t}),addContractor:t=>e(e=>({contractors:[...e.contractors,t]})),updateContractor:(t,r)=>e(e=>({contractors:e.contractors.map(e=>e.id===t?{...e,...r}:e)})),payments:[],setPayments:t=>e({payments:t}),updatePayment:(t,r)=>e(e=>({payments:e.payments.map(e=>e.id===t?{...e,...r}:e)})),settings:{companyName:"ООО 'СтройДевелопмент'",inn:"7701234567",kpp:"770101001",address:"г. Москва, ул. Строителей, д. 1",currentAccount:"40702810100000001234",specialAccount:"40702810200000002345",bik:"044525225",bankName:"ПАО Сбербанк",apiKey:"sk_test_••••••••••••••••",webhookUrl:"",ipWhitelist:""},updateSettings:t=>e(e=>({settings:{...e.settings,...t}}))}))},1384:function(e,t,r){r.d(t,{gG:function(){return i},o0:function(){return s},p6:function(){return a},xG:function(){return n}});let n=e=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),a=e=>{let t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}).format(t)},s=e=>{let t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},i=e=>({VAT:"НДС",USN:"УСН",NPD:"НПД"})[e]},2735:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},9397:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}}]);