"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[990],{824:function(e,t,r){r.d(t,{A:function(){return v}});var s=r(7437),n=r(2265),a=r(7648),i=r(9376),l=r(1994),c=r(5466),o=r(8736),d=r(9277),m=r(8226),u=r(7117),x=r(5805),h=r(8728),p=r(2097),f=r(875),g=r(401);let N=[{value:"DEVELOPER_ADMIN",label:"Застройщик",description:"Администратор застройщика"},{value:"M2_OPERATOR",label:"М2-Оператор",description:"Сотрудник М2 Split"},{value:"AGENCY_ADMIN",label:"АН-Админ",description:"Администратор агентства"},{value:"CONTRACTOR",label:"Агент",description:"Агент / ИП / НПД"}];function y(){let{currentRole:e,switchRole:t}=(0,p.o)(),[r,a]=(0,n.useState)(!1),i=N.find(t=>t.value===e);return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),a(!r)},className:"w-full flex items-center justify-between px-3 py-2 text-sm bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center min-w-0 flex-1",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 mr-2 text-gray-500 flex-shrink-0"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1 text-left",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-gray-900 truncate",children:null==i?void 0:i.label}),(0,s.jsx)("p",{className:"text-xs text-gray-500 truncate",children:null==i?void 0:i.description})]})]}),(0,s.jsx)(f.Z,{className:"w-4 h-4 text-gray-400 ml-2 flex-shrink-0 transition-transform ".concat(r?"rotate-180":"")})]}),r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 z-[9998]",onClick:e=>{e.preventDefault(),e.stopPropagation(),a(!1)}}),(0,s.jsxs)("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-[9999] max-h-96 overflow-auto",children:[(0,s.jsx)("div",{className:"px-3 py-2 border-b border-gray-100",children:(0,s.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Переключить роль"})}),N.map(r=>(0,s.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),t(r.value),a(!1)},className:"w-full flex items-center justify-between px-3 py-2 text-sm hover:bg-gray-50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex-1 text-left min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:r.label}),(0,s.jsx)("p",{className:"text-xs text-gray-500 truncate",children:r.description})]}),e===r.value&&(0,s.jsx)(g.Z,{className:"w-4 h-4 text-primary-600 ml-2 flex-shrink-0"})]},r.value))]})]})]})}let b=[{name:"Дашборд",href:"/dashboard",icon:c.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR","AGENCY_ADMIN","CONTRACTOR"]},{name:"Сделки",href:"/deals",icon:o.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR","AGENCY_ADMIN","CONTRACTOR"]},{name:"Реестры",href:"/registries",icon:d.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR"]},{name:"Выплаты",href:"/payments",icon:m.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR","AGENCY_ADMIN","CONTRACTOR"]},{name:"Документы",href:"/documents",icon:u.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR","AGENCY_ADMIN","CONTRACTOR"]},{name:"Контрагенты",href:"/contractors",icon:x.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR"]},{name:"Настройки",href:"/settings",icon:h.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR"]}],v=e=>{let{children:t}=e,r=(0,i.usePathname)(),{currentRole:n}=(0,p.o)(),c=b.filter(e=>e.roles.includes(n));return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"fixed inset-y-0 left-0 w-64 bg-white border-r border-gray-200",children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsx)("div",{className:"flex items-center h-16 px-6 border-b border-gray-200",children:(0,s.jsx)("h1",{className:"text-xl font-bold text-primary-600",children:"M2 Split"})}),(0,s.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto",children:c.map(e=>{let t=e.icon,n=r===e.href||r.startsWith(e.href+"/");return(0,s.jsxs)(a.default,{href:e.href,className:(0,l.W)("flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors",n?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"),children:[(0,s.jsx)(t,{className:"w-5 h-5 mr-3"}),e.name]},e.name)})}),(0,s.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,s.jsx)(y,{})})]})}),(0,s.jsx)("div",{className:"pl-64",children:(0,s.jsx)("main",{className:"p-8",children:t})})]})}},9178:function(e,t,r){r.d(t,{O:function(){return i},Z:function(){return a}});var s=r(7437);r(2265);var n=r(1994);let a=e=>{let{children:t,className:r,padding:a="md"}=e;return(0,s.jsx)("div",{className:(0,n.W)("bg-white rounded-lg shadow-sm border border-gray-200",{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[a],r),children:t})},i=e=>{let{title:t,subtitle:r,action:n}=e;return(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t}),r&&(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:r})]}),n&&(0,s.jsx)("div",{children:n})]})}},5930:function(e,t,r){r.d(t,{RM:function(){return l},SC:function(){return c},iA:function(){return a},pj:function(){return o},xD:function(){return i}});var s=r(7437);r(2265);var n=r(1994);let a=e=>{let{children:t,className:r}=e;return(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsx)("table",{className:(0,n.W)("min-w-full divide-y divide-gray-200",r),children:t})})},i=e=>{let{children:t}=e;return(0,s.jsx)("thead",{className:"bg-gray-50",children:t})},l=e=>{let{children:t}=e;return(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t})},c=e=>{let{children:t,onClick:r,className:a}=e;return(0,s.jsx)("tr",{className:(0,n.W)(r&&"cursor-pointer hover:bg-gray-50",a),onClick:r,children:t})},o=e=>{let{children:t,header:r,className:a}=e;return r?(0,s.jsx)("th",{className:(0,n.W)("px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",a),children:t}):(0,s.jsx)("td",{className:(0,n.W)("px-6 py-4 whitespace-nowrap text-sm text-gray-900",a),children:t})}},2097:function(e,t,r){r.d(t,{o:function(){return s}});let s=(0,r(3011).U)(e=>({currentUser:null,currentRole:"M2_OPERATOR",setCurrentUser:t=>e({currentUser:t}),switchRole:t=>e({currentRole:t}),deals:[],setDeals:t=>e({deals:t}),addDeal:t=>e(e=>({deals:[...e.deals,t]})),updateDeal:(t,r)=>e(e=>({deals:e.deals.map(e=>e.id===t?{...e,...r}:e)})),registries:[],setRegistries:t=>e({registries:t}),addRegistry:t=>e(e=>({registries:[...e.registries,t]})),updateRegistry:(t,r)=>e(e=>({registries:e.registries.map(e=>e.id===t?{...e,...r}:e)})),contractors:[],setContractors:t=>e({contractors:t}),addContractor:t=>e(e=>({contractors:[...e.contractors,t]})),updateContractor:(t,r)=>e(e=>({contractors:e.contractors.map(e=>e.id===t?{...e,...r}:e)})),payments:[],setPayments:t=>e({payments:t}),updatePayment:(t,r)=>e(e=>({payments:e.payments.map(e=>e.id===t?{...e,...r}:e)})),settings:{companyName:"ООО 'СтройДевелопмент'",inn:"7701234567",kpp:"770101001",address:"г. Москва, ул. Строителей, д. 1",currentAccount:"40702810100000001234",specialAccount:"40702810200000002345",bik:"044525225",bankName:"ПАО Сбербанк",apiKey:"sk_test_••••••••••••••••",webhookUrl:"",ipWhitelist:""},updateSettings:t=>e(e=>({settings:{...e.settings,...t}}))}))},1384:function(e,t,r){r.d(t,{gG:function(){return i},o0:function(){return a},p6:function(){return n},xG:function(){return s}});let s=e=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),n=e=>{let t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}).format(t)},a=e=>{let t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},i=e=>({OSN:"НДС",USN:"УСН",NPD:"НПД"})[e]}}]);