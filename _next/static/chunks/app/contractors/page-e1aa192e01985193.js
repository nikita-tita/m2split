(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[480],{6655:function(e,a,s){Promise.resolve().then(s.bind(s,7897))},7897:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return b}});var r=s(7437),t=s(2265),l=s(824),n=s(9178),i=s(4226),d=s(8068),c=s(9379);let o=(0,s(9205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function x(e){let{isOpen:a,onClose:s,title:t,children:l}=e;return a?(0,r.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,r.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:s}),(0,r.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:(0,r.jsxs)("div",{className:"bg-white px-6 pt-5 pb-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-500",children:(0,r.jsx)(o,{className:"w-6 h-6"})})]}),l]})})]})}):null}var u=s(5930),m=s(9397),h=s(1671),p=s(5868),g=s(2097),j=s(1384);function b(){let{contractors:e,addContractor:a,updateContractor:s}=(0,g.o)(),[o,b]=(0,t.useState)(!1),[f,v]=(0,t.useState)(null),[N,y]=(0,t.useState)({name:"",inn:"",kpp:"",accountNumber:"",bik:"",bankName:"",address:"",taxRegime:"USN",role:"AGENT"}),k=e=>{v(e.id),y({name:e.name,inn:e.inn,kpp:e.kpp||"",accountNumber:e.accountNumber,bik:e.bik,bankName:e.bankName,address:e.address,taxRegime:e.taxRegime,role:e.role}),b(!0)},w=(e,a)=>{y({...N,[e]:a})};return(0,r.jsxs)(l.A,{children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Контрагенты и оферты"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Управление исполнителями и акцептом оферт"})]}),(0,r.jsxs)(i.z,{onClick:()=>{v(null),y({name:"",inn:"",kpp:"",accountNumber:"",bik:"",bankName:"",address:"",taxRegime:"USN",role:"AGENT"}),b(!0)},children:[(0,r.jsx)(m.Z,{className:"w-5 h-5 mr-2"}),"Добавить контрагента"]})]}),(0,r.jsx)(n.Z,{padding:"none",children:(0,r.jsxs)(u.iA,{children:[(0,r.jsx)(u.xD,{children:(0,r.jsxs)(u.SC,{children:[(0,r.jsx)(u.pj,{header:!0,children:"Наименование"}),(0,r.jsx)(u.pj,{header:!0,children:"ИНН"}),(0,r.jsx)(u.pj,{header:!0,children:"Роль"}),(0,r.jsx)(u.pj,{header:!0,children:"Режим"}),(0,r.jsx)(u.pj,{header:!0,children:"Счёт"}),(0,r.jsx)(u.pj,{header:!0,children:"Банк"}),(0,r.jsx)(u.pj,{header:!0,children:"Оферта"}),(0,r.jsx)(u.pj,{header:!0,children:" "})]})}),(0,r.jsx)(u.RM,{children:e.map(e=>(0,r.jsxs)(u.SC,{children:[(0,r.jsx)(u.pj,{children:(0,r.jsx)("div",{className:"font-medium",children:e.name})}),(0,r.jsx)(u.pj,{children:(0,r.jsx)("span",{className:"font-mono text-sm",children:e.inn})}),(0,r.jsx)(u.pj,{children:(0,r.jsxs)(c.C,{size:"sm",variant:"info",children:["AGENCY"===e.role&&"АН","AGENT"===e.role&&"Агент","IP"===e.role&&"ИП","NPD"===e.role&&"НПД"]})}),(0,r.jsx)(u.pj,{children:(0,r.jsx)(c.C,{size:"sm",children:(0,j.gG)(e.taxRegime)})}),(0,r.jsx)(u.pj,{children:(0,r.jsx)("span",{className:"font-mono text-xs",children:e.accountNumber})}),(0,r.jsx)(u.pj,{children:(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("div",{children:e.bankName}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 font-mono",children:["БИК: ",e.bik]})]})}),(0,r.jsx)(u.pj,{children:e.offerAcceptedAt?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(h.Z,{className:"w-4 h-4 text-green-600"}),(0,r.jsxs)("div",{className:"text-xs",children:[(0,r.jsx)("div",{className:"text-green-600 font-medium",children:"Принято"}),(0,r.jsx)("div",{className:"text-gray-500",children:(0,j.o0)(e.offerAcceptedAt)})]})]}):(0,r.jsx)(c.C,{variant:"warning",children:"Не принято"})}),(0,r.jsx)(u.pj,{children:(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>k(e),children:(0,r.jsx)(p.Z,{className:"w-4 h-4"})})})})]},e.id))})]})})]}),(0,r.jsx)(x,{isOpen:o,onClose:()=>b(!1),title:f?"Редактирование контрагента":"Добавление контрагента",children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f?s(f,{...N,kpp:N.kpp||void 0,updatedAt:new Date}):a({id:"c".concat(Date.now()),...N,kpp:N.kpp||void 0,createdAt:new Date,updatedAt:new Date}),b(!1)},className:"space-y-4",children:[(0,r.jsx)(d.I,{label:"Наименование",placeholder:"ООО Недвижимость Плюс",value:N.name,onChange:e=>w("name",e.target.value),required:!0}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(d.I,{label:"ИНН",placeholder:"7701234567",value:N.inn,onChange:e=>w("inn",e.target.value),required:!0}),(0,r.jsx)(d.I,{label:"КПП (опционально)",placeholder:"770101001",value:N.kpp,onChange:e=>w("kpp",e.target.value)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(d.P,{label:"Роль",value:N.role,onChange:e=>w("role",e.target.value),options:[{value:"AGENCY",label:"Агентство недвижимости"},{value:"AGENT",label:"Агент"},{value:"IP",label:"Индивидуальный предприниматель"},{value:"NPD",label:"Самозанятый (НПД)"}]}),(0,r.jsx)(d.P,{label:"Налоговый режим",value:N.taxRegime,onChange:e=>w("taxRegime",e.target.value),options:[{value:"VAT",label:"НДС"},{value:"USN",label:"УСН"},{value:"NPD",label:"НПД"}]})]}),(0,r.jsx)(d.I,{label:"Расчётный счёт",placeholder:"40702810100000001234",value:N.accountNumber,onChange:e=>w("accountNumber",e.target.value),required:!0}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(d.I,{label:"БИК банка",placeholder:"044525225",value:N.bik,onChange:e=>w("bik",e.target.value),required:!0}),(0,r.jsx)(d.I,{label:"Наименование банка",placeholder:"ПАО Сбербанк",value:N.bankName,onChange:e=>w("bankName",e.target.value),required:!0})]}),(0,r.jsx)(d.I,{label:"Адрес",placeholder:"г. Москва, ул. Примерная, д. 1",value:N.address,onChange:e=>w("address",e.target.value),required:!0}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,r.jsx)(i.z,{type:"button",variant:"secondary",onClick:()=>b(!1),children:"Отмена"}),(0,r.jsx)(i.z,{type:"submit",children:f?"Сохранить":"Добавить"})]})]})})]})}},9379:function(e,a,s){"use strict";s.d(a,{C:function(){return l}});var r=s(7437);s(2265);var t=s(1994);let l=e=>{let{children:a,variant:s="default",size:l="md"}=e;return(0,r.jsx)("span",{className:(0,t.W)("inline-flex items-center rounded-full font-medium",{default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[s],{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm"}[l]),children:a})}},4226:function(e,a,s){"use strict";s.d(a,{z:function(){return l}});var r=s(7437);s(2265);var t=s(1994);let l=e=>{let{variant:a="primary",size:s="md",className:l,children:n,disabled:i,...d}=e;return(0,r.jsx)("button",{className:(0,t.W)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[a],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[s],l),disabled:i,...d,children:n})}},8068:function(e,a,s){"use strict";s.d(a,{I:function(){return l},P:function(){return n}});var r=s(7437);s(2265);var t=s(1994);let l=e=>{let{label:a,error:s,helperText:l,className:n,...i}=e;return(0,r.jsxs)("div",{className:"w-full",children:[a&&(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,r.jsx)("input",{className:(0,t.W)("w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",s?"border-red-300":"border-gray-300",n),...i}),s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:s}),l&&!s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:l})]})},n=e=>{let{label:a,error:s,options:l,className:n,...i}=e;return(0,r.jsxs)("div",{className:"w-full",children:[a&&(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,r.jsx)("select",{className:(0,t.W)("w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",s?"border-red-300":"border-gray-300",n),...i,children:l.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:s})]})}},1671:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(9205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9397:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5868:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(9205).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])}},function(e){e.O(0,[211,990,971,117,744],function(){return e(e.s=6655)}),_N_E=e.O()}]);