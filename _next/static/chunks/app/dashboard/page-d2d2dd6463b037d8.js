(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{8484:function(e,t,r){Promise.resolve().then(r.bind(r,597))},597:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var a=r(7437),n=r(2265),c=r(824),s=r(9178),i=r(1384);let d=e=>{let{title:t,value:r,icon:c,trend:d,format:l="number"}=e,o=n.useMemo(()=>"currency"===l&&"number"==typeof r?(0,i.xG)(r):"percent"===l&&"number"==typeof r?"".concat(r.toFixed(2),"%"):r,[r,l]);return(0,a.jsx)(s.Z,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t}),(0,a.jsx)("p",{className:"mt-2 text-3xl font-semibold text-gray-900",children:o}),d&&(0,a.jsxs)("p",{className:"mt-2 text-sm ".concat(d.positive?"text-green-600":"text-red-600"),children:[d.positive?"+":"-",Math.abs(d.value),"%",(0,a.jsx)("span",{className:"text-gray-500 ml-1",children:"vs прошлый период"})]})]}),(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-primary-50 rounded-lg",children:(0,a.jsx)(c,{className:"w-6 h-6 text-primary-600"})})]})})};var l=r(4226),o=r(9379),u=r(5930),m=r(9397),x=r(9277),h=r(9205);let p=(0,h.Z)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),j=(0,h.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),N=(0,h.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),A=(0,h.Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var D=r(7117);let y=(0,h.Z)("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]);var f=r(2097),v=r(3694),g=r(3702),E=r(8332),R=r(9280),b=r(7648);function w(){let{deals:e,payments:t,currentRole:r}=(0,f.o)(),n=v.L$,h=v.G.slice(0,3),w=v.kG.slice(0,5),I=["M2_OPERATOR","AGENCY_ADMIN","CONTRACTOR"].includes(r),C=["M2_OPERATOR","DEVELOPER_ADMIN"].includes(r),O=["DEVELOPER_ADMIN","M2_OPERATOR"].includes(r),P="CONTRACTOR"===r,k="AGENCY_ADMIN"===r;return(0,a.jsx)(c.A,{children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:(()=>{switch(r){case"DEVELOPER_ADMIN":return"Дашборд застройщика";case"M2_OPERATOR":return"Дашборд М2-оператора";case"AGENCY_ADMIN":return"Дашборд агентства";case"CONTRACTOR":return"Мои выплаты и сделки";default:return"Дашборд"}})()}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:(()=>{switch(r){case"DEVELOPER_ADMIN":return"Общая информация по выплатам и сделкам застройщика";case"M2_OPERATOR":return"Управление сделками и реестрами выплат";case"AGENCY_ADMIN":return"Статистика выплат и сделок вашего агентства";case"CONTRACTOR":return"Ваши выплаты, сделки и документы";default:return"Общая информация"}})()})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[I&&(0,a.jsx)(b.default,{href:"/deals/new",children:(0,a.jsxs)(l.z,{children:[(0,a.jsx)(m.Z,{className:"w-5 h-5 mr-2"}),"Создать сделку"]})}),C&&(0,a.jsx)(b.default,{href:"/registries/new",children:(0,a.jsxs)(l.z,{variant:"secondary",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 mr-2"}),"Сформировать реестр"]})})]})]}),P&&(0,a.jsx)(R.N,{id:"contractor-first-deal",title:"\uD83D\uDC4B Добро пожаловать в М2 Split!",description:"Вы находитесь в роли агента. Первый шаг - создать сделку на бронирование объекта у застройщика. Система автоматически рассчитает комиссию КВН и покажет, как М2 распределит её между участниками.",actionText:"Создать первую сделку",actionHref:"/deals/new"}),(0,a.jsx)(g.E,{...E.p.overview,defaultExpanded:!1}),O&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsx)(d,{title:"Сумма на спецсчёте",value:n.specialAccountBalance,icon:p,format:"currency"}),(0,a.jsx)(d,{title:"Выплачено за период",value:n.paidThisPeriod,icon:j,format:"currency",trend:{value:12.5,positive:!0}}),(0,a.jsx)(d,{title:"Выплаты в ожидании",value:n.pendingPayments,icon:N,format:"currency"}),(0,a.jsx)(d,{title:"Выплаты в ошибке",value:n.errorPayments,icon:A,format:"currency"}),(0,a.jsx)(d,{title:"Полнота первички",value:n.primaryDocCompletion,icon:D.Z,format:"percent"}),(0,a.jsx)(d,{title:"Экономия НДС для АН",value:n.vatSavings,icon:y,format:"currency"})]}),k&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(d,{title:"Выплачено за период",value:9e6,icon:j,format:"currency",trend:{value:15.3,positive:!0}}),(0,a.jsx)(d,{title:"Выплаты в ожидании",value:45e5,icon:N,format:"currency"}),(0,a.jsx)(d,{title:"Экономия НДС",value:18e5,icon:y,format:"currency"}),(0,a.jsx)(d,{title:"Полнота первички",value:66.7,icon:D.Z,format:"percent"})]}),P&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsx)(d,{title:"Выплачено мне",value:45e5,icon:j,format:"currency"}),(0,a.jsx)(d,{title:"Ожидает выплаты",value:15e5,icon:N,format:"currency"}),(0,a.jsx)(d,{title:"Моих документов",value:2,icon:D.Z,format:"number"})]}),(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(s.O,{title:P?"Мои сделки":"Недавние сделки",action:(0,a.jsx)(b.default,{href:"/deals",children:(0,a.jsx)(l.z,{variant:"ghost",size:"sm",children:"Все сделки"})})}),(0,a.jsxs)(u.iA,{children:[(0,a.jsx)(u.xD,{children:(0,a.jsxs)(u.SC,{children:[(0,a.jsx)(u.pj,{header:!0,children:"Объект"}),(0,a.jsx)(u.pj,{header:!0,children:"Лот"}),(0,a.jsx)(u.pj,{header:!0,children:P?"Моя сумма":"Сумма"}),(0,a.jsx)(u.pj,{header:!0,children:"Статус"}),(0,a.jsx)(u.pj,{header:!0,children:"Дата"})]})}),(0,a.jsx)(u.RM,{children:h.map(e=>{var t;return(0,a.jsxs)(u.SC,{children:[(0,a.jsx)(u.pj,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.objectName}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.objectAddress})]})}),(0,a.jsx)(u.pj,{children:e.lotNumber||"—"}),(0,a.jsx)(u.pj,{children:P?(0,i.xG)((null===(t=e.shares[1])||void 0===t?void 0:t.amount)||0):(0,i.xG)(e.totalAmount)}),(0,a.jsx)(u.pj,{children:(0,a.jsxs)(o.C,{variant:"IN_PROGRESS"===e.status?"info":"default",children:["DRAFT"===e.status&&"Черновик","IN_PROGRESS"===e.status&&"В работе","IN_REGISTRY"===e.status&&"В реестре","PAID"===e.status&&"Выплачено"]})}),(0,a.jsx)(u.pj,{children:(0,i.p6)(e.createdAt)})]},e.id)})})]})]}),(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(s.O,{title:P?"Мои выплаты":"Статусы выплат",action:(0,a.jsx)(b.default,{href:"/payments",children:(0,a.jsx)(l.z,{variant:"ghost",size:"sm",children:"Все выплаты"})})}),(0,a.jsxs)(u.iA,{children:[(0,a.jsx)(u.xD,{children:(0,a.jsxs)(u.SC,{children:[(0,a.jsx)(u.pj,{header:!0,children:"Реестр"}),(0,a.jsx)(u.pj,{header:!0,children:"Сумма"}),(0,a.jsx)(u.pj,{header:!0,children:"Статус"}),(0,a.jsx)(u.pj,{header:!0,children:"Дата"})]})}),(0,a.jsx)(u.RM,{children:w.filter((e,t)=>P?1===t:!k||t<=1).map(e=>(0,a.jsxs)(u.SC,{children:[(0,a.jsx)(u.pj,{children:e.registryId}),(0,a.jsx)(u.pj,{children:(0,i.xG)(e.amount)}),(0,a.jsx)(u.pj,{children:(0,a.jsxs)(o.C,{variant:"EXECUTED"===e.status?"success":"ERROR"===e.status?"danger":"warning",children:["PENDING"===e.status&&"Ожидание","ACCEPTED_BY_BANK"===e.status&&"Принято банком","EXECUTED"===e.status&&"Исполнено","ERROR"===e.status&&"Ошибка"]})}),(0,a.jsx)(u.pj,{children:(0,i.p6)(e.createdAt)})]},e.id))})]})]}),P&&(0,a.jsx)(s.Z,{children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(D.Z,{className:"w-12 h-12 text-primary-600 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Следите за документами"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Не забывайте загружать акты, счета-фактуры и чеки НПД после получения выплат"}),(0,a.jsx)(b.default,{href:"/documents",children:(0,a.jsx)(l.z,{size:"sm",children:"Перейти к документам"})})]})})]})})}},9379:function(e,t,r){"use strict";r.d(t,{C:function(){return c}});var a=r(7437);r(2265);var n=r(1994);let c=e=>{let{children:t,variant:r="default",size:c="md"}=e;return(0,a.jsx)("span",{className:(0,n.W)("inline-flex items-center rounded-full font-medium",{default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[r],{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm"}[c]),children:t})}},3694:function(e,t,r){"use strict";r.d(t,{G:function(){return c},L$:function(){return d},bs:function(){return a},dp:function(){return n},kG:function(){return i},nh:function(){return s}});let a=[{id:"1",email:"admin@developer.ru",name:"Иван Застройщиков",role:"DEVELOPER_ADMIN",createdAt:new Date("2024-01-01")},{id:"2",email:"operator@m2split.ru",name:"Мария Операторова",role:"M2_OPERATOR",createdAt:new Date("2024-01-01")},{id:"3",email:"agency@realty.ru",name:'АН "Недвижимость+"',role:"CONTRACTOR",createdAt:new Date("2024-01-15")}],n=[{id:"c1",type:"AGENCY",name:'АН "Недвижимость Плюс"',inn:"7701234567",kpp:"770101001",accountNumber:"40702810100000001234",bik:"044525225",bankName:"ПАО Сбербанк",address:"г. Москва, ул. Примерная, д. 1",offerAcceptedAt:new Date("2024-02-01"),offerAcceptanceChannel:"email",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-02-01")},{id:"c2",type:"AGENT",name:"Петров Петр Петрович",inn:"771234567890",accountNumber:"40817810200000002345",bik:"044525225",bankName:"ПАО Сбербанк",address:"г. Москва, ул. Агентская, д. 2",offerAcceptedAt:new Date("2024-02-05"),offerAcceptanceChannel:"web",createdAt:new Date("2024-01-20"),updatedAt:new Date("2024-02-05")},{id:"c3",type:"NPD",name:"Сидорова Анна Ивановна",inn:"123456789012",accountNumber:"40817810300000003456",bik:"044525974",bankName:"ПАО ВТБ",address:"г. Санкт-Петербург, пр. Невский, д. 100",offerAcceptedAt:new Date("2024-02-10"),offerAcceptanceChannel:"mobile",createdAt:new Date("2024-01-25"),updatedAt:new Date("2024-02-10")}],c=[{id:"d1",objectName:'ЖК "Солнечный"',objectAddress:"г. Москва, ул. Солнечная, д. 10, корп. 1",lotNumber:"Кв. 45",developerId:"1",totalAmount:15e6,status:"IN_PROGRESS",shares:[{id:"s1",contractorId:"c1",contractor:n[0],role:"AGENCY",sharePercent:60,amount:9e6,taxRegime:"OSN",vatRate:20,contractNumber:"АГ-001/2024",contractDate:new Date("2024-02-01")},{id:"s2",contractorId:"c2",contractor:n[1],role:"AGENT",sharePercent:30,amount:45e5,taxRegime:"USN",contractNumber:"АГ-002/2024",contractDate:new Date("2024-02-05")},{id:"s3",contractorId:"c3",contractor:n[2],role:"NPD",sharePercent:10,amount:15e5,taxRegime:"NPD",contractNumber:"АГ-003/2024",contractDate:new Date("2024-02-10")}],contractBasis:"Договор комиссии",contractNumber:"ДК-2024-001",contractDate:new Date("2024-02-01"),specialAccountReceiptDate:new Date("2024-02-15"),responsibleUserId:"2",initiator:{role:"M2_OPERATOR",partyId:"1",userId:"2",timestamp:new Date("2024-02-01")},createdAt:new Date("2024-02-01"),updatedAt:new Date("2024-02-15")},{id:"d2",objectName:'ЖК "Морской бриз"',objectAddress:"г. Санкт-Петербург, наб. Морская, д. 5",lotNumber:"Кв. 102",developerId:"1",totalAmount:22e6,status:"DRAFT",shares:[{id:"s4",contractorId:"c1",contractor:n[0],role:"AGENCY",sharePercent:70,amount:154e5,taxRegime:"OSN",vatRate:20},{id:"s5",contractorId:"c2",contractor:n[1],role:"AGENT",sharePercent:30,amount:66e5,taxRegime:"USN"}],responsibleUserId:"2",initiator:{role:"AGENCY_ADMIN",partyId:"c1",userId:"3",timestamp:new Date("2024-03-01")},createdAt:new Date("2024-03-01"),updatedAt:new Date("2024-03-01")}],s=[{id:"r1",registryNumber:"РЕЕ-2024-001",date:new Date("2024-03-15"),status:"APPROVED",totalAmount:15e6,linesCount:3,creatorId:"2",approverId:"1",approvedAt:new Date("2024-03-16"),lines:[{id:"l1",registryId:"r1",contractorId:"c1",contractor:n[0],role:"AGENCY",inn:"7701234567",accountNumber:"40702810100000001234",bik:"044525225",amount:9e6,taxRegime:"OSN",vatRate:20,contractNumber:"АГ-001/2024",contractDate:new Date("2024-02-01"),comment:"Комиссия за сделку ЖК Солнечный кв.45",paymentStatus:"PENDING",createdAt:new Date("2024-03-15"),updatedAt:new Date("2024-03-15")},{id:"l2",registryId:"r1",contractorId:"c2",contractor:n[1],role:"AGENT",inn:"771234567890",accountNumber:"40817810200000002345",bik:"044525225",amount:45e5,taxRegime:"USN",contractNumber:"АГ-002/2024",contractDate:new Date("2024-02-05"),comment:"Агентское вознаграждение",paymentStatus:"PENDING",createdAt:new Date("2024-03-15"),updatedAt:new Date("2024-03-15")},{id:"l3",registryId:"r1",contractorId:"c3",contractor:n[2],role:"NPD",inn:"123456789012",accountNumber:"40817810300000003456",bik:"044525974",amount:15e5,taxRegime:"NPD",contractNumber:"АГ-003/2024",contractDate:new Date("2024-02-10"),comment:"Услуги самозанятого",paymentStatus:"PENDING",createdAt:new Date("2024-03-15"),updatedAt:new Date("2024-03-15")}],createdAt:new Date("2024-03-15"),updatedAt:new Date("2024-03-16")}],i=[{id:"p1",registryId:"r1",lineId:"l1",contractorId:"c1",amount:9e6,status:"EXECUTED",bankReference:"BNK-2024-001",executedAt:new Date("2024-03-17"),createdAt:new Date("2024-03-16"),updatedAt:new Date("2024-03-17")},{id:"p2",registryId:"r1",lineId:"l2",contractorId:"c2",amount:45e5,status:"ACCEPTED_BY_BANK",bankReference:"BNK-2024-002",createdAt:new Date("2024-03-16"),updatedAt:new Date("2024-03-16")},{id:"p3",registryId:"r1",lineId:"l3",contractorId:"c3",amount:15e5,status:"ERROR",bankErrorCode:"ERR-01",bankErrorText:"Неверный номер счёта получателя",createdAt:new Date("2024-03-16"),updatedAt:new Date("2024-03-16")}],d={specialAccountBalance:37e6,paidThisPeriod:9e6,pendingPayments:6e6,errorPayments:15e5,primaryDocCompletion:33.33,vatSavings:18e5}},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}},function(e){e.O(0,[211,769,652,971,117,744],function(){return e(e.s=8484)}),_N_E=e.O()}]);