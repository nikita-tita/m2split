(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[453],{1666:function(e,s,t){Promise.resolve().then(t.bind(t,9147))},9147:function(e,s,t){"use strict";t.d(s,{default:function(){return f}});var r=t(7437);t(2265);var a=t(824),n=t(9178),c=t(4226),i=t(9379),d=t(5930),l=t(2660),x=t(5868),m=t(9277),h=t(8930),j=t(9397),o=t(2097),u=t(1384),g=t(7648);function f(e){let{id:s}=e,{deals:t}=(0,o.o)(),f=t.find(e=>e.id===s);if(!f)return(0,r.jsx)(a.A,{children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Сделка не найдена"}),(0,r.jsx)(g.default,{href:"/deals",children:(0,r.jsx)(c.z,{className:"mt-4",children:"Вернуться к списку"})})]})});let p=f.shares.reduce((e,s)=>e+s.sharePercent,0);return(0,r.jsx)(a.A,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(g.default,{href:"/deals",children:(0,r.jsx)(c.z,{variant:"ghost",size:"sm",children:(0,r.jsx)(l.Z,{className:"w-5 h-5"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:f.objectName}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:f.objectAddress})]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)(c.z,{variant:"secondary",children:[(0,r.jsx)(x.Z,{className:"w-5 h-5 mr-2"}),"Редактировать"]}),(0,r.jsxs)(c.z,{children:[(0,r.jsx)(m.Z,{className:"w-5 h-5 mr-2"}),"Сформировать реестр"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)(n.Z,{className:"lg:col-span-2",children:[(0,r.jsx)(n.O,{title:"Информация о сделке"}),(0,r.jsxs)("dl",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"№ сделки"}),(0,r.jsx)("dd",{className:"mt-1 text-sm font-mono text-gray-900",children:f.id})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Лот"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:f.lotNumber||"—"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Сумма КВН"}),(0,r.jsx)("dd",{className:"mt-1 text-sm font-semibold text-gray-900",children:(0,u.xG)(f.totalAmount)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Статус"}),(0,r.jsx)("dd",{className:"mt-1",children:(0,r.jsxs)(i.C,{variant:"IN_PROGRESS"===f.status?"info":"default",children:["DRAFT"===f.status&&"Черновик","IN_PROGRESS"===f.status&&"В работе","IN_REGISTRY"===f.status&&"В реестре","PAID"===f.status&&"Выплачено"]})})]}),f.contractNumber&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Договор №"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:f.contractNumber})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Дата договора"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:f.contractDate?(0,u.p6)(f.contractDate):"—"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Дата создания"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:(0,u.p6)(f.createdAt)})]}),f.specialAccountReceiptDate&&(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Поступило на спецсчёт"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:(0,u.p6)(f.specialAccountReceiptDate)})]})]})]}),(0,r.jsxs)(n.Z,{children:[(0,r.jsx)(n.O,{title:"Валидация"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Сумма долей"}),(0,r.jsxs)(i.C,{variant:.01>Math.abs(p-100)?"success":"danger",children:[p.toFixed(2),"%"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Участников"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:f.shares.length})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Реквизиты"}),(0,r.jsx)(i.C,{variant:"success",children:"Заполнены"})]})]})]})]}),(0,r.jsxs)(n.Z,{padding:"none",children:[(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)(n.O,{title:"Распределение долей"})}),(0,r.jsxs)(d.iA,{children:[(0,r.jsx)(d.xD,{children:(0,r.jsxs)(d.SC,{children:[(0,r.jsx)(d.pj,{header:!0,children:"Получатель"}),(0,r.jsx)(d.pj,{header:!0,children:"Роль"}),(0,r.jsx)(d.pj,{header:!0,children:"Доля %"}),(0,r.jsx)(d.pj,{header:!0,children:"Сумма"}),(0,r.jsx)(d.pj,{header:!0,children:"Режим"}),(0,r.jsx)(d.pj,{header:!0,children:"Ставка НДС"}),(0,r.jsx)(d.pj,{header:!0,children:"Договор"}),(0,r.jsx)(d.pj,{header:!0,children:" "})]})}),(0,r.jsx)(d.RM,{children:f.shares.map(e=>{var s,t;return(0,r.jsxs)(d.SC,{children:[(0,r.jsx)(d.pj,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:null===(s=e.contractor)||void 0===s?void 0:s.name}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["ИНН: ",null===(t=e.contractor)||void 0===t?void 0:t.inn]})]})}),(0,r.jsx)(d.pj,{children:(0,r.jsxs)(i.C,{size:"sm",variant:"info",children:["AGENCY"===e.role&&"АН","AGENT"===e.role&&"Агент","IP"===e.role&&"ИП","NPD"===e.role&&"НПД"]})}),(0,r.jsxs)(d.pj,{className:"font-medium",children:[e.sharePercent,"%"]}),(0,r.jsx)(d.pj,{className:"font-medium",children:(0,u.xG)(e.amount)}),(0,r.jsx)(d.pj,{children:(0,r.jsx)(i.C,{size:"sm",children:(0,u.gG)(e.taxRegime)})}),(0,r.jsx)(d.pj,{children:e.vatRate?"".concat(e.vatRate,"%"):"—"}),(0,r.jsx)(d.pj,{children:(0,r.jsxs)("div",{className:"text-xs",children:[e.contractNumber&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:e.contractNumber}),e.contractDate&&(0,r.jsx)("div",{className:"text-gray-500",children:(0,u.p6)(e.contractDate)})]}),!e.contractNumber&&"—"]})}),(0,r.jsx)(d.pj,{children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(c.z,{variant:"ghost",size:"sm",children:(0,r.jsx)(x.Z,{className:"w-4 h-4"})}),(0,r.jsx)(c.z,{variant:"ghost",size:"sm",children:(0,r.jsx)(h.Z,{className:"w-4 h-4 text-red-600"})})]})})]},e.id)})})]}),(0,r.jsx)("div",{className:"p-4 bg-gray-50 border-t",children:(0,r.jsxs)(c.z,{variant:"ghost",size:"sm",children:[(0,r.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),"Добавить получателя"]})})]})]})})}},9379:function(e,s,t){"use strict";t.d(s,{C:function(){return n}});var r=t(7437);t(2265);var a=t(1994);let n=e=>{let{children:s,variant:t="default",size:n="md"}=e;return(0,r.jsx)("span",{className:(0,a.W)("inline-flex items-center rounded-full font-medium",{default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[t],{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm"}[n]),children:s})}},4226:function(e,s,t){"use strict";t.d(s,{z:function(){return n}});var r=t(7437);t(2265);var a=t(1994);let n=e=>{let{variant:s="primary",size:t="md",className:n,children:c,disabled:i,...d}=e;return(0,r.jsx)("button",{className:(0,a.W)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[s],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[t],n),disabled:i,...d,children:c})}},2660:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9397:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5868:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9205).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},8930:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},function(e){e.O(0,[211,990,971,117,744],function(){return e(e.s=1666)}),_N_E=e.O()}]);