(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[772],{2976:function(e,s,l){Promise.resolve().then(l.bind(l,6473))},6473:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return f}});var r=l(7437),a=l(2265),n=l(6383),t=l(9178),d=l(4226),c=l(8068),i=l(9379),x=l(5930),o=l(2735),h=l(9397),j=l(2097),u=l(1384),m=l(3375),p=l(7648);function f(){let{deals:e}=(0,j.o)(),[s,l]=(0,a.useState)(""),[f,N]=(0,a.useState)("all"),b=e.filter(e=>{let l=e.objectName.toLowerCase().includes(s.toLowerCase())||e.objectAddress.toLowerCase().includes(s.toLowerCase())||e.lotNumber&&e.lotNumber.toLowerCase().includes(s.toLowerCase()),r="all"===f||e.status===f;return l&&r}),v=e=>(0,r.jsx)(i.C,{variant:{DRAFT:"default",IN_PROGRESS:"info",IN_REGISTRY:"warning",PAID:"success"}[e]||"default",children:{DRAFT:"Черновик",IN_PROGRESS:"В работе",IN_REGISTRY:"В реестре",PAID:"Выплачено",PARTIALLY_PAID:"Частично",CANCELLED:"Отменено"}[e]||e});return(0,r.jsx)(n.Layout,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Сделки"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Управление сделками и распределением комиссий"})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)(d.z,{variant:"secondary",onClick:()=>(0,m.Ww)(e),children:[(0,r.jsx)(o.Z,{className:"w-5 h-5 mr-2"}),"Экспорт"]}),(0,r.jsx)(p.default,{href:"/deals/new",children:(0,r.jsxs)(d.z,{children:[(0,r.jsx)(h.Z,{className:"w-5 h-5 mr-2"}),"Создать сделку"]})})]})]}),(0,r.jsx)(t.Z,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsx)(c.I,{placeholder:"Поиск по объекту, адресу или лоту...",value:s,onChange:e=>l(e.target.value)})}),(0,r.jsx)(c.P,{value:f,onChange:e=>N(e.target.value),options:[{value:"all",label:"Все статусы"},{value:"DRAFT",label:"Черновик"},{value:"IN_PROGRESS",label:"В работе"},{value:"IN_REGISTRY",label:"В реестре"},{value:"PAID",label:"Выплачено"}]})]})}),(0,r.jsxs)(t.Z,{padding:"none",children:[(0,r.jsxs)(x.iA,{children:[(0,r.jsx)(x.xD,{children:(0,r.jsxs)(x.SC,{children:[(0,r.jsx)(x.pj,{header:!0,children:"№ сделки"}),(0,r.jsx)(x.pj,{header:!0,children:"Объект"}),(0,r.jsx)(x.pj,{header:!0,children:"Лот"}),(0,r.jsx)(x.pj,{header:!0,children:"Сумма КВН"}),(0,r.jsx)(x.pj,{header:!0,children:"Участников"}),(0,r.jsx)(x.pj,{header:!0,children:"Статус"}),(0,r.jsx)(x.pj,{header:!0,children:"Дата создания"}),(0,r.jsx)(x.pj,{header:!0,children:" "})]})}),(0,r.jsx)(x.RM,{children:b.map(e=>(0,r.jsxs)(x.SC,{children:[(0,r.jsx)(x.pj,{children:(0,r.jsx)("span",{className:"font-mono text-xs",children:e.id})}),(0,r.jsx)(x.pj,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.objectName}),(0,r.jsx)("div",{className:"text-xs text-gray-500 max-w-xs truncate",children:e.objectAddress})]})}),(0,r.jsx)(x.pj,{children:e.lotNumber||"—"}),(0,r.jsx)(x.pj,{className:"font-medium",children:(0,u.xG)(e.totalAmount)}),(0,r.jsx)(x.pj,{children:(0,r.jsx)("span",{className:"text-gray-600",children:e.shares.length})}),(0,r.jsx)(x.pj,{children:v(e.status)}),(0,r.jsx)(x.pj,{children:(0,u.p6)(e.createdAt)}),(0,r.jsx)(x.pj,{children:(0,r.jsx)(p.default,{href:"/deals/".concat(e.id),children:(0,r.jsx)(d.z,{variant:"ghost",size:"sm",children:"Открыть"})})})]},e.id))})]}),0===b.length&&(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Сделки не найдены"})})]})]})})}},8068:function(e,s,l){"use strict";l.d(s,{I:function(){return n},P:function(){return t}});var r=l(7437);l(2265);var a=l(1994);let n=e=>{let{label:s,error:l,helperText:n,className:t,...d}=e;return(0,r.jsxs)("div",{className:"w-full",children:[s&&(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),(0,r.jsx)("input",{className:(0,a.W)("w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",l?"border-red-300":"border-gray-300",t),...d}),l&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l}),n&&!l&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:n})]})},t=e=>{let{label:s,error:l,options:n,className:t,...d}=e;return(0,r.jsxs)("div",{className:"w-full",children:[s&&(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),(0,r.jsx)("select",{className:(0,a.W)("w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",l?"border-red-300":"border-gray-300",t),...d,children:n.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),l&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l})]})}}},function(e){e.O(0,[837,895,971,117,744],function(){return e(e.s=2976)}),_N_E=e.O()}]);