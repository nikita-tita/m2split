(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[772],{2976:function(e,t,r){Promise.resolve().then(r.bind(r,6473))},6473:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var s=r(7437),n=r(2265),a=r(824),l=r(9178),c=r(4226),i=r(8068),d=r(9379),o=r(5930),u=r(2735),x=r(9397),m=r(2097),h=r(1384),j=r(3375),p=r(7648);function g(){let{deals:e}=(0,m.o)(),[t,r]=(0,n.useState)(""),[g,f]=(0,n.useState)("all"),b=e.filter(e=>{let r=e.objectName.toLowerCase().includes(t.toLowerCase())||e.objectAddress.toLowerCase().includes(t.toLowerCase())||e.lotNumber&&e.lotNumber.toLowerCase().includes(t.toLowerCase()),s="all"===g||e.status===g;return r&&s}),v=e=>(0,s.jsx)(d.C,{variant:{DRAFT:"default",IN_PROGRESS:"info",IN_REGISTRY:"warning",PAID:"success"}[e]||"default",children:{DRAFT:"Черновик",IN_PROGRESS:"В работе",IN_REGISTRY:"В реестре",PAID:"Выплачено",PARTIALLY_PAID:"Частично",CANCELLED:"Отменено"}[e]||e});return(0,s.jsx)(a.A,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Сделки"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Управление сделками и распределением комиссий"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)(c.z,{variant:"secondary",onClick:()=>(0,j.Ww)(e),children:[(0,s.jsx)(u.Z,{className:"w-5 h-5 mr-2"}),"Экспорт"]}),(0,s.jsx)(p.default,{href:"/deals/new",children:(0,s.jsxs)(c.z,{children:[(0,s.jsx)(x.Z,{className:"w-5 h-5 mr-2"}),"Создать сделку"]})})]})]}),(0,s.jsx)(l.Z,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsx)(i.I,{placeholder:"Поиск по объекту, адресу или лоту...",value:t,onChange:e=>r(e.target.value)})}),(0,s.jsx)(i.P,{value:g,onChange:e=>f(e.target.value),options:[{value:"all",label:"Все статусы"},{value:"DRAFT",label:"Черновик"},{value:"IN_PROGRESS",label:"В работе"},{value:"IN_REGISTRY",label:"В реестре"},{value:"PAID",label:"Выплачено"}]})]})}),(0,s.jsxs)(l.Z,{padding:"none",children:[(0,s.jsxs)(o.iA,{children:[(0,s.jsx)(o.xD,{children:(0,s.jsxs)(o.SC,{children:[(0,s.jsx)(o.pj,{header:!0,children:"№ сделки"}),(0,s.jsx)(o.pj,{header:!0,children:"Объект"}),(0,s.jsx)(o.pj,{header:!0,children:"Лот"}),(0,s.jsx)(o.pj,{header:!0,children:"Сумма КВН"}),(0,s.jsx)(o.pj,{header:!0,children:"Участников"}),(0,s.jsx)(o.pj,{header:!0,children:"Статус"}),(0,s.jsx)(o.pj,{header:!0,children:"Дата создания"}),(0,s.jsx)(o.pj,{header:!0,children:" "})]})}),(0,s.jsx)(o.RM,{children:b.map(e=>(0,s.jsxs)(o.SC,{children:[(0,s.jsx)(o.pj,{children:(0,s.jsx)("span",{className:"font-mono text-xs",children:e.id})}),(0,s.jsx)(o.pj,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.objectName}),(0,s.jsx)("div",{className:"text-xs text-gray-500 max-w-xs truncate",children:e.objectAddress})]})}),(0,s.jsx)(o.pj,{children:e.lotNumber||"—"}),(0,s.jsx)(o.pj,{className:"font-medium",children:(0,h.xG)(e.totalAmount)}),(0,s.jsx)(o.pj,{children:(0,s.jsx)("span",{className:"text-gray-600",children:e.shares.length})}),(0,s.jsx)(o.pj,{children:v(e.status)}),(0,s.jsx)(o.pj,{children:(0,h.p6)(e.createdAt)}),(0,s.jsx)(o.pj,{children:(0,s.jsx)(p.default,{href:"/deals/".concat(e.id),children:(0,s.jsx)(c.z,{variant:"ghost",size:"sm",children:"Открыть"})})})]},e.id))})]}),0===b.length&&(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Сделки не найдены"})})]})]})})}},9379:function(e,t,r){"use strict";r.d(t,{C:function(){return a}});var s=r(7437);r(2265);var n=r(1994);let a=e=>{let{children:t,variant:r="default",size:a="md"}=e;return(0,s.jsx)("span",{className:(0,n.W)("inline-flex items-center rounded-full font-medium",{default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[r],{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm"}[a]),children:t})}},4226:function(e,t,r){"use strict";r.d(t,{z:function(){return a}});var s=r(7437);r(2265);var n=r(1994);let a=e=>{let{variant:t="primary",size:r="md",className:a,children:l,disabled:c,...i}=e;return(0,s.jsx)("button",{className:(0,n.W)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[t],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[r],a),disabled:c,...i,children:l})}},8068:function(e,t,r){"use strict";r.d(t,{I:function(){return a},P:function(){return l}});var s=r(7437);r(2265);var n=r(1994);let a=e=>{let{label:t,error:r,helperText:a,className:l,...c}=e;return(0,s.jsxs)("div",{className:"w-full",children:[t&&(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,s.jsx)("input",{className:(0,n.W)("w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",r?"border-red-300":"border-gray-300",l),...c}),r&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r}),a&&!r&&(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:a})]})},l=e=>{let{label:t,error:r,options:a,className:l,...c}=e;return(0,s.jsxs)("div",{className:"w-full",children:[t&&(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,s.jsx)("select",{className:(0,n.W)("w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",r?"border-red-300":"border-gray-300",l),...c,children:a.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))}),r&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r})]})}},3375:function(e,t,r){"use strict";r.d(t,{Ww:function(){return i},ig:function(){return c}});var s=r(1384);let n=e=>["Получатель,ИНН,Счёт,БИК,Сумма,Режим налогообложения,Ставка НДС,Договор №,Дата договора,Комментарий",...e.lines.map(e=>{var t,r;return[(null===(t=e.contractor)||void 0===t?void 0:t.name)||"",e.inn,e.accountNumber,e.bik,e.amount.toFixed(2),e.taxRegime,(null===(r=e.vatRate)||void 0===r?void 0:r.toString())||"",e.contractNumber||"",e.contractDate?(0,s.p6)(e.contractDate):"",e.comment||""]}).map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n"),a=e=>["№ сделки,Объект,Адрес,Лот,Сумма КВН,Статус,Дата создания",...e.map(e=>[e.id,e.objectName,e.objectAddress,e.lotNumber||"",e.totalAmount.toFixed(2),e.status,(0,s.p6)(e.createdAt)]).map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n"),l=(e,t,r)=>{let s=new Blob([e],{type:r}),n=URL.createObjectURL(s),a=document.createElement("a");a.href=n,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)},c=e=>{l(n(e),"registry_".concat(e.registryNumber,"_").concat((0,s.p6)(new Date),".csv"),"text/csv;charset=utf-8;")},i=e=>{l(a(e),"deals_".concat((0,s.p6)(new Date),".csv"),"text/csv;charset=utf-8;")}},2735:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}},function(e){e.O(0,[211,990,971,117,744],function(){return e(e.s=2976)}),_N_E=e.O()}]);