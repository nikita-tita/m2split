(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[479],{7800:function(e,s,t){Promise.resolve().then(t.bind(t,2515))},2515:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var r=t(7437),a=t(2265),n=t(824),l=t(9178),i=t(4226),c=t(9379),d=t(1671),o=t(8736),m=t(9388);let x=(0,t(9205).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var h=t(3702),u=t(8332);function p(){let[e,s]=(0,a.useState)("contractors"),[t,p]=(0,a.useState)(null),g=(0,a.useRef)(null),f=e=>{var s;p(e),null===(s=g.current)||void 0===s||s.click()};return(0,r.jsx)(n.A,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("input",{ref:g,type:"file",className:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:e=>{var s;let r=null===(s=e.target.files)||void 0===s?void 0:s[0];r&&t&&(console.log("Uploading ".concat(r.name," for contractor ").concat(t)),alert('Документ "'.concat(r.name,'" загружен для контрагента ').concat(t)),p(null),g.current&&(g.current.value=""))}}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Документы и первичка"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Управление первичной документацией по выплатам"})]}),(0,r.jsx)(h.E,{...u.p.documents}),(0,r.jsx)("div",{className:"border-b border-gray-200",children:(0,r.jsxs)("nav",{className:"flex gap-8",children:[(0,r.jsx)("button",{onClick:()=>s("contractors"),className:"pb-4 text-sm font-medium border-b-2 transition-colors ".concat("contractors"===e?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Исполнители"}),(0,r.jsx)("button",{onClick:()=>s("packages"),className:"pb-4 text-sm font-medium border-b-2 transition-colors ".concat("packages"===e?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Пакеты застройщика"}),(0,r.jsx)("button",{onClick:()=>s("m2service"),className:"pb-4 text-sm font-medium border-b-2 transition-colors ".concat("m2service"===e?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Сервис М2"})]})}),"contractors"===e&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:'АН "Недвижимость Плюс"'}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"НДС 20%"})]}),(0,r.jsx)(c.C,{variant:"success",children:"Загружено"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(d.Z,{className:"w-4 h-4 text-green-600"}),(0,r.jsx)("span",{children:"Акт выполненных работ"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(d.Z,{className:"w-4 h-4 text-green-600"}),(0,r.jsx)("span",{children:"Счёт-фактура"})]})]}),(0,r.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,r.jsxs)(i.z,{variant:"ghost",size:"sm",className:"w-full",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Просмотр документов"]})})]}),(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:"Петров П.П."}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"УСН"})]}),(0,r.jsx)(c.C,{variant:"warning",children:"Запрошено"})]}),(0,r.jsx)("div",{className:"space-y-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(m.Z,{className:"w-4 h-4 text-gray-400"}),(0,r.jsx)("span",{className:"text-gray-500",children:"Акт выполненных работ"})]})}),(0,r.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,r.jsxs)(i.z,{variant:"ghost",size:"sm",className:"w-full",onClick:()=>f("contractor-1"),children:[(0,r.jsx)(x,{className:"w-4 h-4 mr-2"}),"Загрузить документ"]})})]}),(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:"Сидорова А.И."}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"НПД"})]}),(0,r.jsx)(c.C,{variant:"danger",children:"Не загружено"})]}),(0,r.jsx)("div",{className:"space-y-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(m.Z,{className:"w-4 h-4 text-gray-400"}),(0,r.jsx)("span",{className:"text-gray-500",children:"Чек НПД"})]})}),(0,r.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,r.jsxs)(i.z,{variant:"ghost",size:"sm",className:"w-full",onClick:()=>f("contractor-2"),children:[(0,r.jsx)(x,{className:"w-4 h-4 mr-2"}),"Загрузить чек"]})})]})]}),"packages"===e&&(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(l.O,{title:"Пакеты документов для застройщика"}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium",children:"Реестр РЕЕ-2024-001"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Сводный пакет: реестр + банковские статусы + первичка"})]}),(0,r.jsx)(i.z,{variant:"secondary",children:"Скачать .zip"})]})})]}),"m2service"===e&&(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(l.O,{title:"Счета и акты сервиса М2"}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium",children:"Счёт №М2-2024-03"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Март 2024 • 50 000 ₽"})]}),(0,r.jsx)(i.z,{variant:"secondary",children:"Скачать"})]})})]})]})})}},824:function(e,s,t){"use strict";t.d(s,{A:function(){return b}});var r=t(7437),a=t(2265),n=t(7648),l=t(9376),i=t(1994),c=t(5466),d=t(8736),o=t(9277),m=t(8226),x=t(7117),h=t(5805),u=t(8728),p=t(2097),g=t(875),f=t(401);let y=[{value:"DEVELOPER_ADMIN",label:"Застройщик",description:"Администратор застройщика"},{value:"M2_OPERATOR",label:"М2-Оператор",description:"Сотрудник М2 Split"},{value:"AGENCY_ADMIN",label:"АН-Админ",description:"Администратор агентства"},{value:"CONTRACTOR",label:"Агент",description:"Агент / ИП / НПД"}];function j(){let{currentRole:e,switchRole:s}=(0,p.o)(),[t,n]=(0,a.useState)(!1),l=y.find(s=>s.value===e);return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),n(!t)},className:"w-full flex items-center justify-between px-3 py-2 text-sm bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center min-w-0 flex-1",children:[(0,r.jsx)(h.Z,{className:"w-4 h-4 mr-2 text-gray-500 flex-shrink-0"}),(0,r.jsxs)("div",{className:"min-w-0 flex-1 text-left",children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-900 truncate",children:null==l?void 0:l.label}),(0,r.jsx)("p",{className:"text-xs text-gray-500 truncate",children:null==l?void 0:l.description})]})]}),(0,r.jsx)(g.Z,{className:"w-4 h-4 text-gray-400 ml-2 flex-shrink-0 transition-transform ".concat(t?"rotate-180":"")})]}),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 z-[9998]",onClick:e=>{e.preventDefault(),e.stopPropagation(),n(!1)}}),(0,r.jsxs)("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-[9999] max-h-96 overflow-auto",children:[(0,r.jsx)("div",{className:"px-3 py-2 border-b border-gray-100",children:(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Переключить роль"})}),y.map(t=>(0,r.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),s(t.value),n(!1)},className:"w-full flex items-center justify-between px-3 py-2 text-sm hover:bg-gray-50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex-1 text-left min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.label}),(0,r.jsx)("p",{className:"text-xs text-gray-500 truncate",children:t.description})]}),e===t.value&&(0,r.jsx)(f.Z,{className:"w-4 h-4 text-primary-600 ml-2 flex-shrink-0"})]},t.value))]})]})]})}let N=[{name:"Дашборд",href:"/dashboard",icon:c.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR","AGENCY_ADMIN","CONTRACTOR"]},{name:"Сделки",href:"/deals",icon:d.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR","AGENCY_ADMIN","CONTRACTOR"]},{name:"Реестры",href:"/registries",icon:o.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR"]},{name:"Выплаты",href:"/payments",icon:m.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR","AGENCY_ADMIN","CONTRACTOR"]},{name:"Документы",href:"/documents",icon:x.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR","AGENCY_ADMIN","CONTRACTOR"]},{name:"Контрагенты",href:"/contractors",icon:h.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR"]},{name:"Настройки",href:"/settings",icon:u.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR"]}],b=e=>{let{children:s}=e,t=(0,l.usePathname)(),{currentRole:a}=(0,p.o)(),c=N.filter(e=>e.roles.includes(a));return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"fixed inset-y-0 left-0 w-64 bg-white border-r border-gray-200",children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsx)("div",{className:"flex items-center h-16 px-6 border-b border-gray-200",children:(0,r.jsx)("h1",{className:"text-xl font-bold text-primary-600",children:"M2 Split"})}),(0,r.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto",children:c.map(e=>{let s=e.icon,a=t===e.href||t.startsWith(e.href+"/");return(0,r.jsxs)(n.default,{href:e.href,className:(0,i.W)("flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors",a?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"),children:[(0,r.jsx)(s,{className:"w-5 h-5 mr-3"}),e.name]},e.name)})}),(0,r.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,r.jsx)(j,{})})]})}),(0,r.jsx)("div",{className:"pl-64",children:(0,r.jsx)("main",{className:"p-8",children:s})})]})}},9379:function(e,s,t){"use strict";t.d(s,{C:function(){return n}});var r=t(7437);t(2265);var a=t(1994);let n=e=>{let{children:s,variant:t="default",size:n="md"}=e;return(0,r.jsx)("span",{className:(0,a.W)("inline-flex items-center rounded-full font-medium",{default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[t],{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm"}[n]),children:s})}},4226:function(e,s,t){"use strict";t.d(s,{z:function(){return n}});var r=t(7437);t(2265);var a=t(1994);let n=e=>{let{variant:s="primary",size:t="md",className:n,children:l,disabled:i,...c}=e;return(0,r.jsx)("button",{className:(0,a.W)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[s],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[t],n),disabled:i,...c,children:l})}},9178:function(e,s,t){"use strict";t.d(s,{O:function(){return l},Z:function(){return n}});var r=t(7437);t(2265);var a=t(1994);let n=e=>{let{children:s,className:t,padding:n="md"}=e;return(0,r.jsx)("div",{className:(0,a.W)("bg-white rounded-lg shadow-sm border border-gray-200",{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[n],t),children:s})},l=e=>{let{title:s,subtitle:t,action:a}=e;return(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:s}),t&&(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:t})]}),a&&(0,r.jsx)("div",{children:a})]})}},2097:function(e,s,t){"use strict";t.d(s,{o:function(){return r}});let r=(0,t(3011).U)(e=>({currentUser:null,currentRole:"M2_OPERATOR",setCurrentUser:s=>e({currentUser:s}),switchRole:s=>e({currentRole:s}),deals:[],setDeals:s=>e({deals:s}),addDeal:s=>e(e=>({deals:[...e.deals,s]})),updateDeal:(s,t)=>e(e=>({deals:e.deals.map(e=>e.id===s?{...e,...t}:e)})),registries:[],setRegistries:s=>e({registries:s}),addRegistry:s=>e(e=>({registries:[...e.registries,s]})),updateRegistry:(s,t)=>e(e=>({registries:e.registries.map(e=>e.id===s?{...e,...t}:e)})),contractors:[],setContractors:s=>e({contractors:s}),addContractor:s=>e(e=>({contractors:[...e.contractors,s]})),updateContractor:(s,t)=>e(e=>({contractors:e.contractors.map(e=>e.id===s?{...e,...t}:e)})),payments:[],setPayments:s=>e({payments:s}),updatePayment:(s,t)=>e(e=>({payments:e.payments.map(e=>e.id===s?{...e,...t}:e)})),settings:{companyName:"ООО 'СтройДевелопмент'",inn:"7701234567",kpp:"770101001",address:"г. Москва, ул. Строителей, д. 1",currentAccount:"40702810100000001234",specialAccount:"40702810200000002345",bik:"044525225",bankName:"ПАО Сбербанк",apiKey:"sk_test_••••••••••••••••",webhookUrl:"",ipWhitelist:""},updateSettings:s=>e(e=>({settings:{...e.settings,...s}}))}))},1671:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9388:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9205).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}},function(e){e.O(0,[211,514,971,117,744],function(){return e(e.s=7800)}),_N_E=e.O()}]);