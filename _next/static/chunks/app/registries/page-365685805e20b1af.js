(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[527],{2873:function(e,t,n){Promise.resolve().then(n.bind(n,211))},211:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s=n(7437);n(2265);var r=n(824),i=n(9178),c=n(4226),a=n(9379),d=n(5930),l=n(9397),o=n(2735),u=n(2097),x=n(1384),h=n(3375),j=n(3702),p=n(8332),m=n(9280),f=n(7648);function g(){let{registries:e,currentRole:t}=(0,u.o)(),n=e=>(0,s.jsx)(a.C,{variant:{DRAFT:"default",PENDING_APPROVAL:"warning",APPROVED:"info",SENT_TO_BANK:"info",EXECUTED:"success",ERROR:"danger"}[e]||"default",children:{DRAFT:"Черновик",PENDING_APPROVAL:"На утверждении",APPROVED:"Утверждён",SENT_TO_BANK:"Отправлен в банк",EXECUTED:"Исполнен",PARTIALLY_EXECUTED:"Частично",ERROR:"Ошибка"}[e]||e});return(0,s.jsx)(r.A,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Реестры выплат"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Формирование и управление реестрами"})]}),(0,s.jsx)(f.default,{href:"/registries/new",children:(0,s.jsxs)(c.z,{children:[(0,s.jsx)(l.Z,{className:"w-5 h-5 mr-2"}),"Создать реестр"]})})]}),"M2_OPERATOR"===t&&(0,s.jsx)(m.N,{id:"m2-registries-list",title:"\uD83D\uDCB8 Реестры выплат исполнителям",description:"Здесь формируются реестры для выплат исполнителям после оплаты заявок застройщиком. Когда исполнителей несколько на одну заявку, система автоматически сплитит комиссию по их долям. Реестр отправляется в банк, и М2 выплачивает исполнителям со спецсчёта."}),"DEVELOPER_ADMIN"===t&&(0,s.jsx)(m.N,{id:"dev-registries-list",title:"\uD83D\uDCCA Реестры распределения комиссий",description:"Здесь видно, как М2 распределяет комиссии КВН между исполнителями ваших заявок. После оплаты заявки, М2 сплитит комиссию и выплачивает исполнителям согласно их вкладу в сделку."}),(0,s.jsx)(j.E,{...p.p.registriesList}),(0,s.jsx)(i.Z,{padding:"none",children:(0,s.jsxs)(d.iA,{children:[(0,s.jsx)(d.xD,{children:(0,s.jsxs)(d.SC,{children:[(0,s.jsx)(d.pj,{header:!0,children:"№ реестра"}),(0,s.jsx)(d.pj,{header:!0,children:"Дата"}),(0,s.jsx)(d.pj,{header:!0,children:"Строк"}),(0,s.jsx)(d.pj,{header:!0,children:"Сумма"}),(0,s.jsx)(d.pj,{header:!0,children:"Статус"}),(0,s.jsx)(d.pj,{header:!0,children:"Утверждён"}),(0,s.jsx)(d.pj,{header:!0,children:" "})]})}),(0,s.jsx)(d.RM,{children:e.map(e=>(0,s.jsxs)(d.SC,{children:[(0,s.jsx)(d.pj,{children:(0,s.jsx)("span",{className:"font-mono text-sm",children:e.registryNumber})}),(0,s.jsx)(d.pj,{children:(0,x.p6)(e.date)}),(0,s.jsx)(d.pj,{children:e.linesCount}),(0,s.jsx)(d.pj,{className:"font-medium",children:(0,x.xG)(e.totalAmount)}),(0,s.jsx)(d.pj,{children:n(e.status)}),(0,s.jsx)(d.pj,{children:e.approvedAt?(0,x.p6)(e.approvedAt):"—"}),(0,s.jsx)(d.pj,{children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(f.default,{href:"/registries/".concat(e.id),children:(0,s.jsx)(c.z,{variant:"ghost",size:"sm",children:"Открыть"})}),(0,s.jsx)(c.z,{variant:"ghost",size:"sm",onClick:()=>(0,h.ig)(e),children:(0,s.jsx)(o.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})]})})}},9379:function(e,t,n){"use strict";n.d(t,{C:function(){return i}});var s=n(7437);n(2265);var r=n(1994);let i=e=>{let{children:t,variant:n="default",size:i="md"}=e;return(0,s.jsx)("span",{className:(0,r.W)("inline-flex items-center rounded-full font-medium",{default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[n],{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm"}[i]),children:t})}},3375:function(e,t,n){"use strict";n.d(t,{Ww:function(){return d},ig:function(){return a}});var s=n(1384);let r=e=>["Получатель,ИНН,Счёт,БИК,Сумма,Режим налогообложения,Ставка НДС,Договор №,Дата договора,Комментарий",...e.lines.map(e=>{var t,n;return[(null===(t=e.contractor)||void 0===t?void 0:t.name)||"",e.inn,e.accountNumber,e.bik,e.amount.toFixed(2),e.taxRegime,(null===(n=e.vatRate)||void 0===n?void 0:n.toString())||"",e.contractNumber||"",e.contractDate?(0,s.p6)(e.contractDate):"",e.comment||""]}).map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n"),i=e=>["№ сделки,Объект,Адрес,Лот,Сумма КВН,Статус,Дата создания",...e.map(e=>[e.id,e.objectName,e.objectAddress,e.lotNumber||"",e.totalAmount.toFixed(2),e.status,(0,s.p6)(e.createdAt)]).map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n"),c=(e,t,n)=>{let s=new Blob([e],{type:n}),r=URL.createObjectURL(s),i=document.createElement("a");i.href=r,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},a=e=>{c(r(e),"registry_".concat(e.registryNumber,"_").concat((0,s.p6)(new Date),".csv"),"text/csv;charset=utf-8;")},d=e=>{c(i(e),"deals_".concat((0,s.p6)(new Date),".csv"),"text/csv;charset=utf-8;")}},2735:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9205).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},9397:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}},function(e){e.O(0,[211,769,652,971,117,744],function(){return e(e.s=2873)}),_N_E=e.O()}]);