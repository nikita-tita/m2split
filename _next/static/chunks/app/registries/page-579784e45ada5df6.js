(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[527],{2873:function(e,t,n){Promise.resolve().then(n.bind(n,211))},211:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(7437);n(2265);var s=n(824),i=n(9178),a=n(4226),c=n(9379),d=n(5930),l=n(9397),o=n(2735),u=n(2097),x=n(1384),h=n(3375),m=n(7648);function p(){let{registries:e}=(0,u.o)(),t=e=>(0,r.jsx)(c.C,{variant:{DRAFT:"default",PENDING_APPROVAL:"warning",APPROVED:"info",SENT_TO_BANK:"info",EXECUTED:"success",ERROR:"danger"}[e]||"default",children:{DRAFT:"Черновик",PENDING_APPROVAL:"На утверждении",APPROVED:"Утверждён",SENT_TO_BANK:"Отправлен в банк",EXECUTED:"Исполнен",PARTIALLY_EXECUTED:"Частично",ERROR:"Ошибка"}[e]||e});return(0,r.jsx)(s.A,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Реестры выплат"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Формирование и управление реестрами"})]}),(0,r.jsx)(m.default,{href:"/registries/new",children:(0,r.jsxs)(a.z,{children:[(0,r.jsx)(l.Z,{className:"w-5 h-5 mr-2"}),"Создать реестр"]})})]}),(0,r.jsx)(i.Z,{padding:"none",children:(0,r.jsxs)(d.iA,{children:[(0,r.jsx)(d.xD,{children:(0,r.jsxs)(d.SC,{children:[(0,r.jsx)(d.pj,{header:!0,children:"№ реестра"}),(0,r.jsx)(d.pj,{header:!0,children:"Дата"}),(0,r.jsx)(d.pj,{header:!0,children:"Строк"}),(0,r.jsx)(d.pj,{header:!0,children:"Сумма"}),(0,r.jsx)(d.pj,{header:!0,children:"Статус"}),(0,r.jsx)(d.pj,{header:!0,children:"Утверждён"}),(0,r.jsx)(d.pj,{header:!0,children:" "})]})}),(0,r.jsx)(d.RM,{children:e.map(e=>(0,r.jsxs)(d.SC,{children:[(0,r.jsx)(d.pj,{children:(0,r.jsx)("span",{className:"font-mono text-sm",children:e.registryNumber})}),(0,r.jsx)(d.pj,{children:(0,x.p6)(e.date)}),(0,r.jsx)(d.pj,{children:e.linesCount}),(0,r.jsx)(d.pj,{className:"font-medium",children:(0,x.xG)(e.totalAmount)}),(0,r.jsx)(d.pj,{children:t(e.status)}),(0,r.jsx)(d.pj,{children:e.approvedAt?(0,x.p6)(e.approvedAt):"—"}),(0,r.jsx)(d.pj,{children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(m.default,{href:"/registries/".concat(e.id),children:(0,r.jsx)(a.z,{variant:"ghost",size:"sm",children:"Открыть"})}),(0,r.jsx)(a.z,{variant:"ghost",size:"sm",onClick:()=>(0,h.ig)(e),children:(0,r.jsx)(o.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})]})})}},9379:function(e,t,n){"use strict";n.d(t,{C:function(){return i}});var r=n(7437);n(2265);var s=n(1994);let i=e=>{let{children:t,variant:n="default",size:i="md"}=e;return(0,r.jsx)("span",{className:(0,s.W)("inline-flex items-center rounded-full font-medium",{default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[n],{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm"}[i]),children:t})}},4226:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(7437);n(2265);var s=n(1994);let i=e=>{let{variant:t="primary",size:n="md",className:i,children:a,disabled:c,...d}=e;return(0,r.jsx)("button",{className:(0,s.W)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[t],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[n],i),disabled:c,...d,children:a})}},3375:function(e,t,n){"use strict";n.d(t,{Ww:function(){return d},ig:function(){return c}});var r=n(1384);let s=e=>["Получатель,ИНН,Счёт,БИК,Сумма,Режим налогообложения,Ставка НДС,Договор №,Дата договора,Комментарий",...e.lines.map(e=>{var t,n;return[(null===(t=e.contractor)||void 0===t?void 0:t.name)||"",e.inn,e.accountNumber,e.bik,e.amount.toFixed(2),e.taxRegime,(null===(n=e.vatRate)||void 0===n?void 0:n.toString())||"",e.contractNumber||"",e.contractDate?(0,r.p6)(e.contractDate):"",e.comment||""]}).map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n"),i=e=>["№ сделки,Объект,Адрес,Лот,Сумма КВН,Статус,Дата создания",...e.map(e=>[e.id,e.objectName,e.objectAddress,e.lotNumber||"",e.totalAmount.toFixed(2),e.status,(0,r.p6)(e.createdAt)]).map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n"),a=(e,t,n)=>{let r=new Blob([e],{type:n}),s=URL.createObjectURL(r),i=document.createElement("a");i.href=s,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s)},c=e=>{a(s(e),"registry_".concat(e.registryNumber,"_").concat((0,r.p6)(new Date),".csv"),"text/csv;charset=utf-8;")},d=e=>{a(i(e),"deals_".concat((0,r.p6)(new Date),".csv"),"text/csv;charset=utf-8;")}},2735:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(9205).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},9397:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}},function(e){e.O(0,[211,990,971,117,744],function(){return e(e.s=2873)}),_N_E=e.O()}]);