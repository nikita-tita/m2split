(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{4781:function(e,t,s){Promise.resolve().then(s.bind(s,1856))},1856:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var r=s(7437),a=s(2265),l=s(824),n=s(9178),i=s(8068),c=s(4226),o=s(2097),d=s(1671);function u(){let{settings:e,updateSettings:t}=(0,o.o)(),[s,u]=(0,a.useState)(e),[m,x]=(0,a.useState)(!1),h=(e,t)=>{u({...s,[e]:t})},p=JSON.stringify(s)!==JSON.stringify(e);return(0,r.jsx)(l.A,{children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(s),x(!0),setTimeout(()=>x(!1),3e3)},className:"space-y-6 max-w-4xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Настройки"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Конфигурация системы и интеграций"})]}),m&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,r.jsx)(d.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Изменения сохранены"})]})]}),(0,r.jsxs)(n.Z,{children:[(0,r.jsx)(n.O,{title:"Реквизиты застройщика"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(i.I,{label:"Наименование организации",value:s.companyName,onChange:e=>h("companyName",e.target.value),required:!0}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(i.I,{label:"ИНН",value:s.inn,onChange:e=>h("inn",e.target.value),required:!0}),(0,r.jsx)(i.I,{label:"КПП",value:s.kpp,onChange:e=>h("kpp",e.target.value),required:!0})]}),(0,r.jsx)(i.I,{label:"Адрес",value:s.address,onChange:e=>h("address",e.target.value),required:!0})]})]}),(0,r.jsxs)(n.Z,{children:[(0,r.jsx)(n.O,{title:"Банковские счета"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(i.I,{label:"Расчётный счёт",value:s.currentAccount,onChange:e=>h("currentAccount",e.target.value),required:!0}),(0,r.jsx)(i.I,{label:"Спецсчёт распределения",value:s.specialAccount,onChange:e=>h("specialAccount",e.target.value),required:!0}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(i.I,{label:"БИК",value:s.bik,onChange:e=>h("bik",e.target.value),required:!0}),(0,r.jsx)(i.I,{label:"Наименование банка",value:s.bankName,onChange:e=>h("bankName",e.target.value),required:!0})]})]})]}),(0,r.jsxs)(n.Z,{children:[(0,r.jsx)(n.O,{title:"API и интеграции"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(i.I,{label:"API ключ",type:"password",value:s.apiKey,onChange:e=>h("apiKey",e.target.value)}),(0,r.jsx)(i.I,{label:"Webhook URL для статусов банка",placeholder:"https://your-domain.com/webhooks/bank-status",value:s.webhookUrl,onChange:e=>h("webhookUrl",e.target.value)}),(0,r.jsx)(i.I,{label:"IP whitelist (через запятую)",placeholder:"192.168.1.1, 10.0.0.1",value:s.ipWhitelist,onChange:e=>h("ipWhitelist",e.target.value)})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)(c.z,{type:"button",variant:"secondary",onClick:()=>{u(e)},disabled:!p,children:"Отмена"}),(0,r.jsx)(c.z,{type:"submit",disabled:!p,children:"Сохранить изменения"})]})]})})}},824:function(e,t,s){"use strict";s.d(t,{A:function(){return v}});var r=s(7437),a=s(2265),l=s(7648),n=s(9376),i=s(1994),c=s(5466),o=s(8736),d=s(9277),u=s(8226),m=s(7117),x=s(5805),h=s(8728),p=s(2097),g=s(875),f=s(401);let b=[{value:"DEVELOPER_ADMIN",label:"Застройщик",description:"Администратор застройщика"},{value:"M2_OPERATOR",label:"М2-Оператор",description:"Сотрудник М2 Split"},{value:"AGENCY_ADMIN",label:"АН-Админ",description:"Администратор агентства"},{value:"CONTRACTOR",label:"Агент",description:"Агент / ИП / НПД"}];function y(){let{currentRole:e,switchRole:t}=(0,p.o)(),[s,l]=(0,a.useState)(!1),n=b.find(t=>t.value===e);return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),l(!s)},className:"w-full flex items-center justify-between px-3 py-2 text-sm bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center min-w-0 flex-1",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4 mr-2 text-gray-500 flex-shrink-0"}),(0,r.jsxs)("div",{className:"min-w-0 flex-1 text-left",children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-900 truncate",children:null==n?void 0:n.label}),(0,r.jsx)("p",{className:"text-xs text-gray-500 truncate",children:null==n?void 0:n.description})]})]}),(0,r.jsx)(g.Z,{className:"w-4 h-4 text-gray-400 ml-2 flex-shrink-0 transition-transform ".concat(s?"rotate-180":"")})]}),s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 z-[9998]",onClick:e=>{e.preventDefault(),e.stopPropagation(),l(!1)}}),(0,r.jsxs)("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-[9999] max-h-96 overflow-auto",children:[(0,r.jsx)("div",{className:"px-3 py-2 border-b border-gray-100",children:(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Переключить роль"})}),b.map(s=>(0,r.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),t(s.value),l(!1)},className:"w-full flex items-center justify-between px-3 py-2 text-sm hover:bg-gray-50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex-1 text-left min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.label}),(0,r.jsx)("p",{className:"text-xs text-gray-500 truncate",children:s.description})]}),e===s.value&&(0,r.jsx)(f.Z,{className:"w-4 h-4 text-primary-600 ml-2 flex-shrink-0"})]},s.value))]})]})]})}let N=[{name:"Дашборд",href:"/dashboard",icon:c.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR","AGENCY_ADMIN","CONTRACTOR"]},{name:"Сделки",href:"/deals",icon:o.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR","AGENCY_ADMIN","CONTRACTOR"]},{name:"Реестры",href:"/registries",icon:d.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR"]},{name:"Выплаты",href:"/payments",icon:u.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR","AGENCY_ADMIN","CONTRACTOR"]},{name:"Документы",href:"/documents",icon:m.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR","AGENCY_ADMIN","CONTRACTOR"]},{name:"Контрагенты",href:"/contractors",icon:x.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR"]},{name:"Настройки",href:"/settings",icon:h.Z,roles:["DEVELOPER_ADMIN","M2_OPERATOR"]}],v=e=>{let{children:t}=e,s=(0,n.usePathname)(),{currentRole:a}=(0,p.o)(),c=N.filter(e=>e.roles.includes(a));return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"fixed inset-y-0 left-0 w-64 bg-white border-r border-gray-200",children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsx)("div",{className:"flex items-center h-16 px-6 border-b border-gray-200",children:(0,r.jsx)("h1",{className:"text-xl font-bold text-primary-600",children:"M2 Split"})}),(0,r.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto",children:c.map(e=>{let t=e.icon,a=s===e.href||s.startsWith(e.href+"/");return(0,r.jsxs)(l.default,{href:e.href,className:(0,i.W)("flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors",a?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"),children:[(0,r.jsx)(t,{className:"w-5 h-5 mr-3"}),e.name]},e.name)})}),(0,r.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,r.jsx)(y,{})})]})}),(0,r.jsx)("div",{className:"pl-64",children:(0,r.jsx)("main",{className:"p-8",children:t})})]})}},4226:function(e,t,s){"use strict";s.d(t,{z:function(){return l}});var r=s(7437);s(2265);var a=s(1994);let l=e=>{let{variant:t="primary",size:s="md",className:l,children:n,disabled:i,...c}=e;return(0,r.jsx)("button",{className:(0,a.W)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[t],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[s],l),disabled:i,...c,children:n})}},9178:function(e,t,s){"use strict";s.d(t,{O:function(){return n},Z:function(){return l}});var r=s(7437);s(2265);var a=s(1994);let l=e=>{let{children:t,className:s,padding:l="md"}=e;return(0,r.jsx)("div",{className:(0,a.W)("bg-white rounded-lg shadow-sm border border-gray-200",{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[l],s),children:t})},n=e=>{let{title:t,subtitle:s,action:a}=e;return(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t}),s&&(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:s})]}),a&&(0,r.jsx)("div",{children:a})]})}},8068:function(e,t,s){"use strict";s.d(t,{I:function(){return l},P:function(){return n}});var r=s(7437);s(2265);var a=s(1994);let l=e=>{let{label:t,error:s,helperText:l,className:n,...i}=e;return(0,r.jsxs)("div",{className:"w-full",children:[t&&(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,r.jsx)("input",{className:(0,a.W)("w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",s?"border-red-300":"border-gray-300",n),...i}),s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:s}),l&&!s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:l})]})},n=e=>{let{label:t,error:s,options:l,className:n,...i}=e;return(0,r.jsxs)("div",{className:"w-full",children:[t&&(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,r.jsx)("select",{className:(0,a.W)("w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",s?"border-red-300":"border-gray-300",n),...i,children:l.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:s})]})}},2097:function(e,t,s){"use strict";s.d(t,{o:function(){return r}});let r=(0,s(3011).U)(e=>({currentUser:null,currentRole:"M2_OPERATOR",setCurrentUser:t=>e({currentUser:t}),switchRole:t=>e({currentRole:t}),deals:[],setDeals:t=>e({deals:t}),addDeal:t=>e(e=>({deals:[...e.deals,t]})),updateDeal:(t,s)=>e(e=>({deals:e.deals.map(e=>e.id===t?{...e,...s}:e)})),registries:[],setRegistries:t=>e({registries:t}),addRegistry:t=>e(e=>({registries:[...e.registries,t]})),updateRegistry:(t,s)=>e(e=>({registries:e.registries.map(e=>e.id===t?{...e,...s}:e)})),contractors:[],setContractors:t=>e({contractors:t}),addContractor:t=>e(e=>({contractors:[...e.contractors,t]})),updateContractor:(t,s)=>e(e=>({contractors:e.contractors.map(e=>e.id===t?{...e,...s}:e)})),payments:[],setPayments:t=>e({payments:t}),updatePayment:(t,s)=>e(e=>({payments:e.payments.map(e=>e.id===t?{...e,...s}:e)})),settings:{companyName:"ООО 'СтройДевелопмент'",inn:"7701234567",kpp:"770101001",address:"г. Москва, ул. Строителей, д. 1",currentAccount:"40702810100000001234",specialAccount:"40702810200000002345",bik:"044525225",bankName:"ПАО Сбербанк",apiKey:"sk_test_••••••••••••••••",webhookUrl:"",ipWhitelist:""},updateSettings:t=>e(e=>({settings:{...e.settings,...t}}))}))},1671:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])}},function(e){e.O(0,[211,971,117,744],function(){return e(e.s=4781)}),_N_E=e.O()}]);