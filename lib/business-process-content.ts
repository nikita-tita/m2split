type ProcessContent = {
  title: string;
  description: string;
  steps?: string[];
  operations?: {
    title: string;
    items: string[];
  };
  documents?: {
    title: string;
    items: string[];
  };
  accounts?: {
    title: string;
    items: string[];
  };
};

export const businessProcessContent: Record<string, ProcessContent> = {
  // Общее описание сервиса (для дашборда)
  overview: {
    title: 'Как работает сервис М2 Split',
    description: 'М2 Split - это платформа для автоматизации распределения комиссий от застройщиков между участниками сделок (АН, агенты, ИП, НПД). Система обеспечивает прозрачность расчетов, автоматизацию документооборота и быструю выплату вознаграждений всем участникам.',
    steps: [
      'Агент создает сделку на бронирование объекта недвижимости',
      'Система рассчитывает комиссию КВН на основе тарифов застройщика',
      'Комиссия распределяется между участниками сделки (АН, агенты)',
      'Застройщик переводит комиссию на номинальный счет М2',
      'Оператор М2 формирует реестр выплат и отправляет в банк',
      'Банк исполняет выплаты, средства поступают на счета участников',
      'Участники загружают первичные документы (акты, чеки НПД)',
      'М2 формирует сводный пакет документов для застройщика',
    ],
    operations: {
      title: 'Финансовые потоки в системе:',
      items: [
        'Застройщик → Номинальный счет М2 (комиссия КВН за приведенных клиентов)',
        'Номинальный счет М2 → Расчетные счета участников (распределение долей)',
        'М2 удерживает сервисный сбор за обслуживание платформы',
        'Все операции отслеживаются через банковские API в реальном времени',
      ],
    },
    accounts: {
      title: 'Счета в системе:',
      items: [
        'Номинальный счет М2 - для получения комиссии от застройщиков',
        'Расчетные счета АН - для получения доли комиссии агентствами',
        'Расчетные счета агентов (ИП/НПД) - для получения личной доли',
      ],
    },
    documents: {
      title: 'Документооборот:',
      items: [
        'Договоры с застройщиками о выплате комиссии КВН',
        'Договоры с участниками (АН, агенты) о распределении комиссии',
        'Акты и счета-фактуры от исполнителей после выплат',
        'Чеки НПД от самозанятых участников',
        'Сводные пакеты для застройщиков (реестр + подтверждения + первичка)',
      ],
    },
  },

  // Создание сделки
  dealCreation: {
    title: 'Как работает процесс создания сделки',
    description: 'Агент (сотрудник АН или независимый риэлтор) создает заявку на бронирование объекта недвижимости у застройщика. Система автоматически рассчитывает комиссию КВН на основе тарифов и распределяет доли между участниками сделки.',
    steps: [
      'Агент находит клиента и подбирает объект у застройщика',
      'Агент создает сделку в системе М2 Split, указывая объект, застройщика, сумму договора и данные клиента',
      'Система автоматически находит действующий тариф для выбранного застройщика и проекта',
      'Система рассчитывает комиссию КВН (комиссию от застройщика)',
      'Агент распределяет комиссию между участниками: АН, агенты, ИП, НПД',
      'Сделка сохраняется в статусе "Черновик" и может быть отредактирована',
      'После завершения бронирования сделка переходит в статус "В работе"',
    ],
    operations: {
      title: 'Финансовые операции на этом этапе:',
      items: [
        'Застройщик заключает договор с клиентом на покупку объекта',
        'Клиент вносит оплату застройщику по договору купли-продажи',
        'Застройщик обязуется выплатить комиссию КВН сервису М2 согласно договору о сотрудничестве',
        'Пока сделка в черновике - никаких финансовых обязательств еще не возникает',
      ],
    },
    accounts: {
      title: 'Работа со счетами:',
      items: [
        'Номинальный счет М2 - куда застройщик переводит комиссию КВН',
        'Расчетные счета участников - куда М2 переводит доли после получения комиссии',
        'На этом этапе операций со счетами еще нет',
      ],
    },
    documents: {
      title: 'Документы на этом этапе:',
      items: [
        'Договор купли-продажи между клиентом и застройщиком',
        'Договор о сотрудничестве между М2 и застройщиком (заключен заранее)',
        'Договоры с участниками сделки (АН, агенты) - должны быть заключены до выплат',
      ],
    },
  },

  // Список сделок
  dealsList: {
    title: 'Как работает управление сделками',
    description: 'В этом разделе отображаются все сделки в системе с возможностью фильтрации по статусам. Каждая сделка проходит жизненный цикл от создания до выплаты комиссии всем участникам.',
    steps: [
      'Черновик - сделка создана, но еще не подтверждена',
      'В работе - объект забронирован, ожидается оплата от застройщика',
      'В реестре - сделка включена в реестр на выплату',
      'Выплачено - комиссия распределена между всеми участниками',
    ],
    operations: {
      title: 'Жизненный цикл сделки:',
      items: [
        'Создание сделки (статус: Черновик)',
        'Бронирование объекта у застройщика (статус: В работе)',
        'Получение комиссии от застройщика на номинальный счет М2',
        'Формирование реестра выплат (статус: В реестре)',
        'Выплата долей участникам на их расчетные счета (статус: Выплачено)',
      ],
    },
  },

  // Создание реестра
  registryCreation: {
    title: 'Как работает процесс создания реестра выплат',
    description: 'Реестр выплат - это документ, который формирует оператор М2 для отправки в банк. В реестре собраны все выплаты участникам сделок за определенный период. После получения комиссии от застройщика, оператор создает реестр и отправляет его в банк для исполнения.',
    steps: [
      'Оператор М2 получает комиссию от застройщика на номинальный счет',
      'Оператор формирует реестр выплат, группируя сделки за период',
      'В реестр добавляются строки для каждого участника: АН, агенты, ИП, НПД',
      'Указываются банковские реквизиты, суммы, налоговые режимы',
      'Реестр сохраняется в статусе "Черновик" и может быть отредактирован',
      'После проверки реестр подписывается и отправляется в банк (статус "Отправлен")',
      'Банк исполняет платежи и возвращает статусы по каждой строке',
    ],
    operations: {
      title: 'Финансовые операции:',
      items: [
        'С номинального счета М2 списываются средства согласно реестру',
        'Средства поступают на расчетные счета участников (АН, агенты, ИП, НПД)',
        'Для плательщиков НДС выделяется сумма НДС отдельной строкой',
        'После исполнения всех платежей сделки переходят в статус "Выплачено"',
      ],
    },
    accounts: {
      title: 'Движение средств по счетам:',
      items: [
        'Номинальный счет М2 → Списание сумм согласно реестру',
        'Расчетные счета участников → Зачисление долей комиссии',
        'Каждая строка реестра = один платеж с уникальным назначением платежа',
      ],
    },
    documents: {
      title: 'Документы для реестра:',
      items: [
        'Реестр платежей в формате банка (обычно Excel или XML)',
        'Выписка с номинального счета М2 о получении комиссии от застройщика',
        'После выплат: подтверждения банка об исполнении каждого платежа',
        'Для отчетности: банковские выписки с расчетных счетов участников',
      ],
    },
  },

  // Список реестров
  registriesList: {
    title: 'Как работает управление реестрами',
    description: 'Реестры проходят несколько стадий: от создания до полного исполнения банком. Каждый реестр содержит множество строк выплат, и банк возвращает статус по каждой из них.',
    steps: [
      'Черновик - реестр создан, но еще не отправлен в банк',
      'Отправлен - реестр отправлен в банк на исполнение',
      'В обработке - банк принял реестр и начал исполнение',
      'Исполнен - все платежи выполнены успешно',
      'Частично исполнен - часть платежей выполнена, часть завершилась с ошибкой',
    ],
    operations: {
      title: 'Процесс обработки реестра:',
      items: [
        'Оператор М2 создает реестр и проверяет все данные',
        'Реестр выгружается в формате банка и загружается в банк-клиент',
        'Банк проверяет реестр и начинает исполнение платежей',
        'По каждой строке банк возвращает статус: исполнено или ошибка',
        'Оператор М2 отслеживает статусы и решает проблемы с неисполненными платежами',
      ],
    },
  },

  // Платежи
  payments: {
    title: 'Как работает мониторинг платежей',
    description: 'После отправки реестра в банк, система отслеживает статус каждого платежа. Банк возвращает информацию об исполнении: успешно выполнен, в обработке или ошибка.',
    steps: [
      'Реестр отправлен в банк',
      'Банк обрабатывает каждую строку реестра',
      'По каждому платежу банк возвращает статус и референс (уникальный номер)',
      'При успешном исполнении средства зачисляются на счет получателя',
      'При ошибке оператор М2 видит причину и может повторить платеж',
    ],
    operations: {
      title: 'Возможные статусы платежей:',
      items: [
        'Ожидание - платеж создан, но еще не отправлен в банк',
        'Принято банком - банк получил платеж и начал обработку',
        'Исполнено - деньги зачислены на счет получателя',
        'Ошибка - платеж не исполнен (неверные реквизиты, недостаточно средств и т.д.)',
      ],
    },
    accounts: {
      title: 'Отслеживание по счетам:',
      items: [
        'Номинальный счет М2 - контроль списаний',
        'Расчетные счета участников - подтверждение зачислений',
        'Референсы банка позволяют найти платеж в выписке',
      ],
    },
  },

  // Документы
  documents: {
    title: 'Как работает документооборот',
    description: 'Для каждой выплаты требуется первичная документация: акты, счета-фактуры, чеки НПД. Система помогает собрать все документы и сформировать полные пакеты для застройщика и для бухгалтерии М2.',
    steps: [
      'После выплаты оператор М2 запрашивает первичку у каждого исполнителя',
      'Исполнители (АН, агенты, ИП, НПД) загружают документы в систему',
      'Для НДС: акт выполненных работ + счет-фактура',
      'Для УСН: акт выполненных работ',
      'Для НПД: чек из приложения "Мой налог"',
      'Все документы группируются по реестрам',
      'Формируется сводный пакет для отправки застройщику',
    ],
    operations: {
      title: 'Документы для разных режимов налогообложения:',
      items: [
        'НДС (ОСН) - акт + счет-фактура с выделенным НДС',
        'УСН - акт выполненных работ без НДС',
        'НПД - чек из приложения "Мой налог"',
        'М2 формирует сводный акт и счет-фактуру для застройщика',
      ],
    },
    documents: {
      title: 'Пакеты документов:',
      items: [
        'Исполнители → Первичные документы (акты, чеки)',
        'М2 → Застройщику: реестр + подтверждения банка + первичка',
        'М2 → Для бухгалтерии: все документы для закрытия сделок',
        'Застройщик → М2: счет и акт на комиссию КВН',
      ],
    },
  },

  // Контрагенты
  contractors: {
    title: 'Как работает управление контрагентами',
    description: 'Контрагенты - это все участники процесса: застройщики, агентства недвижимости, агенты, ИП, НПД. Для каждого контрагента хранятся реквизиты, налоговый режим, договоры.',
    steps: [
      'Добавление нового контрагента с указанием ИНН, названия, реквизитов',
      'Выбор налогового режима: НДС (ОСН), УСН, НПД',
      'Загрузка договора о сотрудничестве',
      'Проверка и подтверждение контрагента оператором М2',
      'После подтверждения контрагент доступен для включения в сделки',
    ],
    operations: {
      title: 'Типы контрагентов:',
      items: [
        'Застройщики - платят комиссию КВН сервису М2',
        'Агентства недвижимости - получают долю комиссии',
        'Агенты (ИП/НПД) - получают долю комиссии',
        'М2 - оператор платформы, получает сервисный сбор',
      ],
    },
    documents: {
      title: 'Документы контрагента:',
      items: [
        'Договор о сотрудничестве',
        'Реквизиты для выплат (номер счета, БИК, название банка)',
        'Свидетельство ИНН, выписка из ЕГРЮЛ/ЕГРИП',
        'Для НПД - справка о постановке на учет',
      ],
    },
  },

  // Настройки тарифов
  tariffs: {
    title: 'Как работают тарифы на комиссию',
    description: 'Тарифы определяют, какую комиссию КВН застройщик платит за каждого приведенного клиента. Тарифы могут различаться по застройщикам, проектам, типам клиентов (уникальный/повторный).',
    steps: [
      'Оператор М2 заключает договор с застройщиком',
      'В договоре прописывается размер комиссии (фиксированная сумма или % от сделки)',
      'Тариф вносится в систему с указанием застройщика, проекта, дат действия',
      'При создании сделки система автоматически находит подходящий тариф',
      'Комиссия рассчитывается автоматически на основе суммы договора и тарифа',
    ],
    operations: {
      title: 'Типы тарифов:',
      items: [
        'Процентный - комиссия рассчитывается как % от суммы договора с клиентом',
        'Фиксированный - комиссия фиксирована за каждый объект',
        'Уникальный клиент - повышенная комиссия за нового клиента',
        'Повторный клиент - сниженная комиссия за клиента, который уже покупал у застройщика',
      ],
    },
  },
};
