type ProcessContent = {
  title: string;
  description: string;
  steps?: string[];
  operations?: {
    title: string;
    items: string[];
  };
  documents?: {
    title: string;
    items: string[];
  };
  accounts?: {
    title: string;
    items: string[];
  };
  metrics?: {
    title: string;
    items: string[];
  };
};

export const businessProcessContent: Record<string, ProcessContent> = {
  // Общее описание сервиса (для дашборда)
  overview: {
    title: 'Как работает сервис М2 Split',
    description: 'М2 Split - это платформа-оператор, которая получает единую комиссию КВН от застройщика и автоматически распределяет её между участниками сделок (АН, агенты, ИП, НПД). У застройщика один договор - с М2. М2 обеспечивает прозрачность расчетов, автоматизацию документооборота и быструю выплату вознаграждений всем участникам.',
    steps: [
      'Агент создает сделку на бронирование объекта недвижимости',
      'Система рассчитывает комиссию КВН на основе договора М2 с застройщиком',
      'Агент планирует распределение комиссии между участниками сделки',
      'Застройщик переводит единую комиссию КВН на номинальный счет М2 (спецсчёт платформы)',
      'М2 получает комиссию и удерживает сервисный сбор за обслуживание платформы',
      'Оператор М2 формирует реестр выплат участникам и отправляет в банк',
      'Банк исполняет выплаты от имени М2, средства поступают на счета участников',
      'Участники предоставляют первичные документы М2 (акты, чеки НПД) - "первичку" для бухгалтерии',
      'М2 формирует сводный пакет документов для застройщика',
    ],
    operations: {
      title: 'Финансовые потоки (платформенная модель):',
      items: [
        'Застройщик → М2: единая комиссия КВН по договору с М2',
        'М2 удерживает сервисный сбор за обслуживание платформы (до распределения участникам)',
        'М2 → Участники: распределение комиссии по заранее согласованным долям',
        'Все операции проходят через номинальный счет М2 / спецсчёт (застройщик не переводит напрямую АН или агентам)',
        'Прямых финансовых отношений между застройщиком и участниками нет',
        'ЭКОНОМИЯ НДС: М2 может распределять через УСН/НПД участников без НДС 20%, что снижает налоговую нагрузку для АН',
      ],
    },
    accounts: {
      title: 'Счета в системе:',
      items: [
        'Номинальный счет М2 (спецсчёт) - единственный получатель комиссии от застройщиков',
        'Номинальный счет М2 (спецсчёт) - единственный плательщик для всех участников',
        'Расчетные счета участников (АН, агенты, ИП, НПД) - получают выплаты только от М2',
        'Экономия НДС для АН: если застройщик платит напрямую АН 10 млн + НДС 2 млн = 12 млн. Через М2: часть можно распределить на УСН/НПД без НДС 20% - экономия до 20% налоговой нагрузки',
      ],
    },
    documents: {
      title: 'Документооборот:',
      items: [
        'Застройщик ↔ М2: договор об оказании услуг и выплате комиссии КВН',
        'М2 ↔ Участники: договоры о сотрудничестве и распределении комиссии',
        'Участники → М2: акты, счета-фактуры, чеки НПД после получения выплат от М2',
        'М2 → Застройщику: сводный пакет (реестр + подтверждения банка + первичка от участников)',
        'ПЕРВИЧКА (первичные документы) - это акты, счета-фактуры, чеки НПД, которые подтверждают факт оказания услуг и служат основанием для бухучета',
        'Застройщик работает только с М2, не напрямую с АН или агентами',
      ],
    },
    metrics: {
      title: 'Ключевые метрики дашборда:',
      items: [
        'Сумма на спецсчёте - остаток на номинальном счете М2 (комиссии от застройщиков, еще не распределенные участникам)',
        'Выплачено за период - сколько М2 уже перечислила участникам в выбранном периоде',
        'Выплаты в ожидании - сделки включены в реестры, но банк еще не исполнил платежи от М2',
        'Выплаты в ошибке - платежи которые банк не смог исполнить (неверные реквизиты, недостаток средств на спецсчёте М2)',
        'Полнота первички - % сделок по которым участники предоставили все первичные документы М2',
        'Экономия НДС для АН - сколько сэкономлено на налогах благодаря распределению через УСН/НПД вместо прямых выплат с НДС',
      ],
    },
  },

  // Создание сделки
  dealCreation: {
    title: 'Как работает процесс создания сделки',
    description: 'Агент (сотрудник АН или независимый риэлтор) создает заявку на бронирование объекта недвижимости у застройщика. Система автоматически рассчитывает комиссию КВН, которую застройщик заплатит М2, и показывает, как М2 распределит эту комиссию между участниками сделки.',
    steps: [
      'Агент находит клиента и подбирает объект у застройщика',
      'Агент создает сделку в системе М2 Split, указывая объект, застройщика, сумму договора и данные клиента',
      'Система автоматически находит действующий тариф из договора М2 с застройщиком',
      'Система рассчитывает комиссию КВН, которую застройщик заплатит М2',
      'Агент планирует распределение: какую долю получат АН, агенты, ИП, НПД (остальное - сервисный сбор М2)',
      'Сделка сохраняется в статусе "Черновик" и может быть отредактирована',
      'После завершения бронирования сделка переходит в статус "В работе"',
    ],
    operations: {
      title: 'Финансовые операции на этом этапе:',
      items: [
        'Клиент заключает договор купли-продажи с застройщиком',
        'Клиент вносит оплату застройщику по договору',
        'Застройщик обязуется выплатить комиссию КВН сервису М2 (по договору М2 ↔ Застройщик)',
        'М2 обязуется распределить полученную комиссию между участниками по долям (по договорам М2 ↔ Участники)',
        'Пока сделка в черновике - никаких финансовых обязательств еще не возникает',
      ],
    },
    accounts: {
      title: 'Работа со счетами:',
      items: [
        'Номинальный счет М2 (спецсчёт) - единственный получатель комиссии КВН от застройщика',
        'Номинальный счет М2 (спецсчёт) - единственный плательщик долей участникам',
        'Расчетные счета участников - получат выплаты от М2 после поступления комиссии',
        'На этом этапе операций со счетами еще нет',
      ],
    },
    documents: {
      title: 'Документы на этом этапе:',
      items: [
        'Договор купли-продажи: клиент ↔ застройщик',
        'Договор об оказании услуг: М2 ↔ застройщик (заключен заранее, определяет размер комиссии КВН)',
        'Договоры о сотрудничестве: М2 ↔ участники (АН, агенты) - должны быть заключены до выплат',
        'Прямых договоров между застройщиком и участниками нет',
      ],
    },
  },

  // Список сделок
  dealsList: {
    title: 'Как работает управление сделками',
    description: 'В этом разделе отображаются все сделки в системе с возможностью фильтрации по статусам. Каждая сделка проходит жизненный цикл от создания до момента, когда М2 получает комиссию от застройщика и распределяет её между участниками.',
    steps: [
      'Черновик - сделка создана, но еще не подтверждена',
      'В работе - объект забронирован, ожидается перевод комиссии от застройщика на спецсчёт М2',
      'В реестре - М2 получила комиссию на спецсчёт, сделка включена в реестр на выплату участникам',
      'Выплачено - М2 распределила комиссию со спецсчёта, все участники получили свои доли',
    ],
    operations: {
      title: 'Жизненный цикл сделки:',
      items: [
        'Создание сделки (статус: Черновик)',
        'Бронирование объекта у застройщика (статус: В работе)',
        'Застройщик → М2: перевод комиссии КВН на номинальный счет М2 (спецсчёт)',
        'Формирование реестра выплат участникам (статус: В реестре)',
        'М2 → Участники: выплата долей со спецсчёта на расчетные счета (статус: Выплачено)',
      ],
    },
  },

  // Создание реестра
  registryCreation: {
    title: 'Как работает процесс создания реестра выплат',
    description: 'Реестр выплат - это документ, который формирует оператор М2 для отправки в банк. В реестре собраны все выплаты, которые М2 должна произвести участникам сделок из полученных комиссий. М2 выступает единственным плательщиком - все выплаты идут с номинального счета М2 (спецсчёта платформы).',
    steps: [
      'Оператор М2 получает комиссию КВН от застройщика на номинальный счет (спецсчёт)',
      'Оператор формирует реестр выплат участникам, группируя сделки за период',
      'В реестр добавляются строки для каждого участника: АН, агенты, ИП, НПД',
      'Указываются реквизиты получателей, суммы долей, налоговые режимы',
      'Реестр сохраняется в статусе "Черновик" и может быть отредактирован',
      'После проверки реестр подписывается и отправляется в банк (статус "Отправлен")',
      'Банк исполняет платежи от имени М2 со спецсчёта и возвращает статусы по каждой строке',
    ],
    operations: {
      title: 'Финансовые операции:',
      items: [
        'Со спецсчёта М2 (номинальный счет) списываются средства согласно реестру',
        'М2 → Участники: средства поступают на расчетные счета (АН, агенты, ИП, НПД)',
        'Для плательщиков НДС выделяется сумма НДС отдельной строкой',
        'М2 удерживает свой сервисный сбор перед распределением',
        'После исполнения всех платежей сделки переходят в статус "Выплачено"',
      ],
    },
    accounts: {
      title: 'Движение средств по счетам:',
      items: [
        'Спецсчёт М2 (номинальный счет) → Списание сумм согласно реестру (М2 - единственный плательщик)',
        'Расчетные счета участников → Зачисление долей от М2',
        'Каждая строка реестра = один платеж от М2 к участнику',
        'Застройщик не участвует в выплатах, вся работа идет через М2',
      ],
    },
    documents: {
      title: 'Документы для реестра:',
      items: [
        'Реестр платежей в формате банка (обычно Excel или XML)',
        'Выписка с номинального счета М2 о получении комиссии КВН от застройщика',
        'После выплат: подтверждения банка об исполнении каждого платежа от М2',
        'Для отчетности: банковские выписки, подтверждающие распределение М2',
      ],
    },
  },

  // Список реестров
  registriesList: {
    title: 'Как работает управление реестрами',
    description: 'Реестры проходят несколько стадий: от создания до полного исполнения банком. Каждый реестр содержит множество строк выплат, и банк возвращает статус по каждой из них.',
    steps: [
      'Черновик - реестр создан, но еще не отправлен в банк',
      'Отправлен - реестр отправлен в банк на исполнение',
      'В обработке - банк принял реестр и начал исполнение',
      'Исполнен - все платежи выполнены успешно',
      'Частично исполнен - часть платежей выполнена, часть завершилась с ошибкой',
    ],
    operations: {
      title: 'Процесс обработки реестра:',
      items: [
        'Оператор М2 создает реестр и проверяет все данные',
        'Реестр выгружается в формате банка и загружается в банк-клиент',
        'Банк проверяет реестр и начинает исполнение платежей',
        'По каждой строке банк возвращает статус: исполнено или ошибка',
        'Оператор М2 отслеживает статусы и решает проблемы с неисполненными платежами',
      ],
    },
  },

  // Платежи
  payments: {
    title: 'Как работает мониторинг платежей',
    description: 'После отправки реестра в банк, система отслеживает статус каждого платежа от М2 к участникам. Банк возвращает информацию об исполнении каждой выплаты: успешно выполнена, в обработке или ошибка. М2 выступает единственным плательщиком по всем строкам реестра.',
    steps: [
      'М2 отправляет реестр выплат участникам в банк',
      'Банк обрабатывает каждую строку реестра (все платежи от имени М2)',
      'По каждому платежу банк возвращает статус и референс (уникальный номер)',
      'При успешном исполнении средства зачисляются на счет получателя от М2',
      'При ошибке оператор М2 видит причину и может повторить платеж',
    ],
    operations: {
      title: 'Возможные статусы платежей:',
      items: [
        'Ожидание - платеж создан в системе М2, но еще не отправлен в банк',
        'Принято банком - банк получил платеж от М2 и начал обработку',
        'Исполнено - деньги зачислены на счет получателя (платеж от М2 выполнен)',
        'Ошибка - платеж не исполнен (неверные реквизиты, недостаточно средств на счете М2 и т.д.)',
      ],
    },
    accounts: {
      title: 'Отслеживание по счетам:',
      items: [
        'Спецсчёт М2 (номинальный счет) - контроль списаний (все платежи идут отсюда)',
        'Расчетные счета участников - подтверждение зачислений от М2',
        'Референсы банка позволяют найти платеж в выписке и подтвердить перевод от М2',
      ],
    },
  },

  // Документы
  documents: {
    title: 'Как работает документооборот',
    description: 'Для каждой выплаты от М2 участникам требуется первичная документация (первичка). Участники предоставляют М2 акты, счета-фактуры, чеки НПД на суммы полученных выплат. М2 собирает все документы и формирует сводные пакеты для застройщика, подтверждающие распределение комиссии.',
    steps: [
      'М2 производит выплаты участникам со своего номинального счета (спецсчёт платформы)',
      'Оператор М2 запрашивает первичные документы у каждого получателя выплаты',
      'Участники (АН, агенты, ИП, НПД) загружают документы на выплаты от М2',
      'Для НДС: акт выполненных работ + счет-фактура (на выплату от М2)',
      'Для УСН: акт выполненных работ (на выплату от М2)',
      'Для НПД: чек из приложения "Мой налог" (на выплату от М2)',
      'М2 группирует документы по реестрам и сделкам',
      'М2 формирует сводный пакет для застройщика, подтверждающий распределение комиссии',
    ],
    operations: {
      title: 'Документы для разных режимов налогообложения:',
      items: [
        'НДС (ОСН) - участник предоставляет М2: акт + счет-фактура на выплату от М2',
        'УСН - участник предоставляет М2: акт выполненных работ на выплату от М2',
        'НПД - участник предоставляет М2: чек на выплату от М2',
        'М2 формирует для застройщика: сводный акт и счет-фактуру на всю комиссию КВН',
      ],
    },
    documents: {
      title: 'Потоки документов (платформенная модель):',
      items: [
        'Участники → М2: первичные документы на выплаты от М2 (акты, чеки)',
        'М2 → Застройщику: реестр распределения + подтверждения банка + первичка от участников',
        'М2 → Застройщику: сводный акт на комиссию КВН и счет-фактура',
        'Застройщик → М2: счет и акт на комиссию КВН (в обратную сторону)',
        'Прямого документооборота между застройщиком и участниками нет',
      ],
    },
  },

  // Контрагенты
  contractors: {
    title: 'Как работает управление контрагентами',
    description: 'Контрагенты - это все участники платформы М2 Split. Застройщики имеют договоры с М2 на выплату комиссии КВН. Участники сделок (АН, агенты, ИП, НПД) имеют договоры с М2 на получение выплат. Прямых договорных отношений между застройщиками и участниками нет.',
    steps: [
      'Добавление нового контрагента с указанием ИНН, названия, реквизитов',
      'Выбор типа: застройщик (платит М2) или участник (получает от М2)',
      'Выбор налогового режима: НДС (ОСН), УСН, НПД',
      'Загрузка договора о сотрудничестве с М2',
      'Проверка и подтверждение контрагента оператором М2',
      'После подтверждения контрагент доступен для включения в сделки',
    ],
    operations: {
      title: 'Типы контрагентов и их роль:',
      items: [
        'Застройщики - имеют договор с М2, платят единую комиссию КВН на счет М2',
        'Агентства недвижимости - имеют договор с М2, получают выплаты долей от М2',
        'Агенты (ИП/НПД) - имеют договор с М2, получают выплаты долей от М2',
        'М2 - центральный оператор платформы, получает от застройщиков и распределяет участникам',
      ],
    },
    documents: {
      title: 'Договоры контрагента:',
      items: [
        'Застройщик ↔ М2: договор об оказании услуг и выплате комиссии КВН',
        'Участник ↔ М2: договор о сотрудничестве и получении выплат',
        'Реквизиты для платежей (номер счета, БИК, название банка)',
        'Свидетельство ИНН, выписка из ЕГРЮЛ/ЕГРИП, справка НПД',
        'Прямых договоров между застройщиком и участниками не требуется',
      ],
    },
  },

  // Настройки тарифов
  tariffs: {
    title: 'Как работают тарифы на комиссию',
    description: 'Тарифы определяют, какую комиссию КВН застройщик платит М2 за каждого приведенного клиента. Тарифы фиксируются в договоре между М2 и застройщиком и могут различаться по проектам и типам клиентов (уникальный/повторный). М2 затем распределяет полученную комиссию между участниками по согласованным долям.',
    steps: [
      'Оператор М2 заключает договор с застройщиком на оказание услуг',
      'В договоре прописывается размер комиссии КВН, которую застройщик платит М2',
      'Тариф вносится в систему с указанием застройщика, проекта, дат действия',
      'При создании сделки система автоматически находит тариф из договора М2 ↔ Застройщик',
      'Комиссия КВН рассчитывается автоматически на основе суммы сделки',
      'Участники планируют распределение полученной комиссии между собой',
    ],
    operations: {
      title: 'Типы тарифов:',
      items: [
        'Процентный - М2 получает от застройщика % от суммы договора с клиентом',
        'Фиксированный - М2 получает от застройщика фиксированную сумму за объект',
        'Уникальный клиент - повышенная комиссия М2 за нового клиента застройщика',
        'Повторный клиент - сниженная комиссия М2 за повторную покупку',
        'Все тарифы определяют поступления на счет М2, а не прямые выплаты участникам',
      ],
    },
  },
};
